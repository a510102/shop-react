(this["webpackJsonpshop-react"]=this["webpackJsonpshop-react"]||[]).push([[4],{50:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(11),c=n(0),l=n.n(c);n(51);function u(e){var t=e.num,n=e.setDePage,u=e.dePage,r=Object(c.useState)([]),o=Object(a.a)(r,2),i=o[0],s=o[1];return Object(c.useEffect)((function(){!function(e){var t=[];if(e>2){for(var n=1;n<e+1;n++)t.push(n);s(t)}}(t)}),[t]),l.a.createElement("ul",{className:"pages"},1!==u&&l.a.createElement("li",null,l.a.createElement("button",{onClick:function(){return n(u-1)}},"Pre")," "),i.length>1&&i.map((function(e,t){return l.a.createElement("li",{key:t},l.a.createElement("button",{className:e===u?"active":"",onClick:function(){return n(e)}},e))})),u!==t&&l.a.createElement("li",null," ",l.a.createElement("button",{onClick:function(){return n(u+1)}},"Next")))}},51:function(e,t,n){},52:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new Date;n.setTime(1e3*e);var a=n.getFullYear(),l=c(n.getMonth()+1),u=c(n.getDate()),r=c(n.getHours()),o=c(n.getMinutes());return t?"".concat(a,"-").concat(l,"-").concat(u,"- ").concat(r,": ").concat(o):"".concat(a,"-").concat(l,"-").concat(u)};function c(e){return e<10&&(e="0".concat(e)),e}},58:function(e,t,n){},68:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return f}));var a=n(21),c=n(13),l=n(12),u=n.n(l),r=n(18),o=n(11),i=n(0),s=n.n(i),d=n(19),p=n(52);function m(e){var t=e.open,n=e.setOpen,a=e.coupon,c=e.handleChange,l=e.updateCoupon,u=e.addCoupon,r=e.handleCancel;return s.a.createElement(s.a.Fragment,null,s.a.createElement("button",{onClick:function(){return n(!t)}},"Add Coupon"),t&&s.a.createElement("ul",null,s.a.createElement("label",{htmlFor:"title"},"\u512a\u60e0\u5377\u540d\u7a31:"),s.a.createElement("input",{id:"title",value:a.title||"",name:"title",onChange:c}),s.a.createElement("label",{htmlFor:"code"},"\u4ee3\u78bc:"),s.a.createElement("input",{id:"code",value:a.code||"",name:"code",onChange:c}),s.a.createElement("label",{htmlFor:"percent"},"\u6298\u6263"),s.a.createElement("input",{id:"percent",value:a.percent||"",name:"percent",onChange:c}),s.a.createElement("label",{htmlFor:"due_date"},"\u4f7f\u7528\u671f\u9650:"),s.a.createElement("input",{id:"due_date",type:"date",value:Object(p.a)(a.due_date)||"",name:"due_date",onChange:c}),s.a.createElement("label",{htmlFor:"is_enable"},"\u662f\u5426\u555f\u7528:"),s.a.createElement("input",{id:"is_enable",type:"checkbox",checked:1===a.is_enabled||"",name:"is_enabled",onChange:c}),a.hasOwnProperty("id")?s.a.createElement("button",{onClick:l},"Update"):s.a.createElement("button",{onClick:u},"add"),s.a.createElement("button",{onClick:r},"Cancel")))}function b(e){var t=e.coupon,n=e.updateIsenable,a=e.openUpdateCoupon,c=e.updateDate;return s.a.createElement("tr",null,s.a.createElement("td",null,t.title),s.a.createElement("td",null,t.code),s.a.createElement("td",null,t.percent/100," \u6298"),s.a.createElement("td",null,Object(p.a)(t.due_date)),s.a.createElement("td",null,s.a.createElement("input",{type:"checkbox",onChange:function(e){return n(e,t)},checked:1===t.is_enabled})),s.a.createElement("td",null,s.a.createElement("button",{onClick:function(){return a(t)}},"\u7de8\u8f2f")),s.a.createElement("td",null," ",s.a.createElement("button",{onClick:function(){c(null,t.id,"DELETE")}},"\u522a\u9664")))}var h=n(20),E=n(50);n(58);function f(){var e=Object(d.b)(),t=Object(i.useState)(null),n=Object(o.a)(t,2),l=n[0],p=n[1],f=Object(i.useState)({}),O=Object(o.a)(f,2),j=O[0],v=O[1],C=Object(i.useState)(!0),g=Object(o.a)(C,2),k=g[0],y=g[1],_=Object(i.useState)(!1),P=Object(o.a)(_,2),x=P[0],S=P[1],T=Object(i.useState)(1),w=Object(o.a)(T,2),D=w[0],F=w[1],N=Object(i.useState)(null),U=Object(o.a)(N,2),J=U[0],L=U[1],A=function(){var e=Object(r.a)(u.a.mark((function e(t){var n,a,c,l,r,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://vue-course-api.hexschool.io/api/jay/admin/coupons?page=".concat(t),e.next=3,fetch(n,{credentials:"include"});case 3:return a=e.sent,e.next=6,a.json();case 6:c=e.sent,l=c.success,r=c.pagination,o=c.coupons,l&&(p(o),L(r.total_pages),y(!1));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){A(D)}),[D]);var I=function(){var t=Object(r.a)(u.a.mark((function t(n,a,l){var r,o,i,s,d;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a?"https://vue-course-api.hexschool.io/api/jay/admin/coupon/".concat(a):"https://vue-course-api.hexschool.io/api/jay/admin/coupon",t.next=3,fetch(r,{method:l,body:("PUT"===l||"POST"===l)&&JSON.stringify({data:Object(c.a)({},n)}),credentials:"include",headers:{"content-type":("PUT"===l||"POST"===l)&&"application/json"}});case 3:return o=t.sent,t.next=6,o.json();case 6:i=t.sent,s=i.success,d=i.message,s?(A(),d&&e.success(d)):d&&e.error(d);case 9:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}(),M=function(e,t){var n=Object(c.a)(Object(c.a)({},t),{},{is_enabled:e.target.checked?1:0});I(n,t.id,"PUT")},H=function(e){v(e),S(!0)};return k?s.a.createElement(h.a,null):s.a.createElement("div",{className:"CouponList"},s.a.createElement("h2",null,"Coupon"),s.a.createElement(m,{open:x,setOpen:S,coupon:j,handleChange:function(e){var t=e.target,n=t.name,l=t.value,u=t.checked,r=t.valueAsNumber;"due_date"===n?l=r/1e3:"is_enabled"===n&&(l=u?1:0),console.log(n,l),v((function(e){return Object(c.a)(Object(c.a)({},e),{},Object(a.a)({},n,l))}))},updateCoupon:function(){I(j,j.id,"PUT"),S(!1)},addCoupon:function(){I(j,null,"POST"),v({}),S(!1)},handleCancel:function(){v({}),S(!1)}}),s.a.createElement("table",{className:"CouponList-table"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"\u512a\u60e0\u5377"),s.a.createElement("th",null,"\u4ee3\u78bc"),s.a.createElement("th",null,"\u6298\u6263"),s.a.createElement("th",null,"\u4f7f\u7528\u671f\u9650"),s.a.createElement("th",null,"\u4f7f\u7528"),s.a.createElement("th",null,"\u7de8\u8f2f"),s.a.createElement("th",null,"\u522a\u9664"))),s.a.createElement("tbody",null,l&&l.map((function(e,t){return s.a.createElement(b,{key:t,coupon:e,updateIsenable:M,openUpdateCoupon:H,updateDate:I})})))),s.a.createElement(E.a,{dePage:D,setDePage:F,num:J}))}}}]);
//# sourceMappingURL=4.5c48e46e.chunk.js.map