(this["webpackJsonpshop-react"]=this["webpackJsonpshop-react"]||[]).push([[12],{70:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return h}));var n=a(17),c=a.n(n),r=a(23),s=a(22),l=a(0),o=a.n(l),u=a(24),i=a(11),m=a(3),p=a(25),d=a(6);function b(){var e=Object(u.b)(),t=Object(l.useState)({user:{},message:""}),a=Object(s.a)(t,2),n=a[0],i=a[1],m=Object(l.useState)(null),b=Object(s.a)(m,2),h=b[0],f=b[1],g=Object(l.useState)(!1),x=Object(s.a)(g,2),j=x[0],y=x[1],E=Object(l.useState)(!1),O=Object(s.a)(E,2),v=O[0],N=O[1];function w(e){var t=e.target,a=t.name,n=t.value;i((function(e){return"message"===a?Object(d.a)(Object(d.a)({},e),{},Object(p.a)({},a,n)):Object(d.a)(Object(d.a)({},e),{},{user:Object(d.a)(Object(d.a)({},e.user),{},Object(p.a)({},a,n))})}))}function k(){return(k=Object(r.a)(c.a.mark((function t(){var a,r,s,l,o,u;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"https://vue-course-api.hexschool.io/api/jay/order",a=n.message?Object(d.a)({},n):Object(d.a)(Object(d.a)({},n),{},{message:"\u7121"}),t.next=4,fetch("https://vue-course-api.hexschool.io/api/jay/order",{method:"POST",body:JSON.stringify({data:Object(d.a)({},a)}),headers:{"content-type":"application/json"}});case 4:return r=t.sent,t.next=7,r.json();case 7:s=t.sent,l=s.success,o=s.orderId,u=s.message,l?(f(o),e.success(u),y(!0)):e.error(u);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function C(){return(C=Object(r.a)(c.a.mark((function t(){var a,n,r,s,l;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="https://vue-course-api.hexschool.io/api/jay/pay/".concat(h),t.next=3,fetch(a,{method:"POST"});case 3:return n=t.sent,t.next=6,n.json();case 6:r=t.sent,s=r.success,l=r.message,s&&(e.show(l),N(!0));case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var S="w-full  px-3 mt-3 mb-6 md:mb-0",F="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",T='appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500" id="grid-last-name';return o.a.createElement("div",null,v?o.a.createElement("div",{className:"w-full flex justify-center items-center h-screen text-lg"},"\u8cfc\u7269\u5b8c\u6210!"):o.a.createElement(o.a.Fragment,null,o.a.createElement("h2",{className:"text-gray-800 text-xl"},"\u5ba2\u6236\u8cc7\u8a0a"),o.a.createElement("div",{className:"flex flex-wrap mb-6 text-left"},o.a.createElement("section",{className:S},o.a.createElement("label",{className:F,htmlFor:"name"},"\u59d3\u540d:"),o.a.createElement("input",{className:T,type:"string",name:"name",id:"id",onChange:w})),o.a.createElement("section",{className:S},o.a.createElement("label",{className:F,htmlFor:"address"},"\u5730\u5740: "),o.a.createElement("input",{className:T,type:"string",name:"address",id:"address",onChange:w})),o.a.createElement("section",{className:S},o.a.createElement("label",{className:F,htmlFor:"tel"},"\u96fb\u8a71:"),o.a.createElement("input",{className:T,type:"number",name:"tel",id:"tel",onChange:w})),o.a.createElement("section",{className:S},o.a.createElement("label",{className:F,htmlFor:"email"},"E-mail:"),o.a.createElement("input",{className:T,type:"email",name:"email",id:"email",onChange:w})),o.a.createElement("section",{className:S},o.a.createElement("label",{className:F,htmlFor:"message"},"Message: "),o.a.createElement("input",{className:T,type:"message",name:"message",id:"message",onChange:w})),o.a.createElement("section",{className:"w-full  px-3 mt-3 mb-6 md:mb-0 sm:relative flex justify-end items-end"},j?o.a.createElement("button",{onClick:function(){return C.apply(this,arguments)},className:"bg-teal-500 hover:bg-teal-700 text-white font-bold py-1 px-2 rounded "},"\u78ba\u8a8d\u7d50\u5e33"):o.a.createElement("button",{onClick:function(){return k.apply(this,arguments)},className:"bg-teal-500 hover:bg-teal-700 text-white font-bold py-1 px-2 rounded "},"\u5b8c\u6210\u8a02\u55ae")))))}function h(){var e=Object(u.b)(),t=Object(m.g)(),a=Object(i.b)(),n=Object(i.c)((function(e){return e.cartsState.carts})),p=Object(l.useState)(""),d=Object(s.a)(p,2),h=d[0],f=d[1],g=Object(l.useState)(!1),x=Object(s.a)(g,2),j=x[0],y=x[1],E=Object(l.useState)(!0),O=Object(s.a)(E,2),v=O[0],N=O[1];function w(){return k.apply(this,arguments)}function k(){return(k=Object(r.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://vue-course-api.hexschool.io/api/jay/cart",e.next=3,fetch("https://vue-course-api.hexschool.io/api/jay/cart");case 3:return t=e.sent,e.next=6,t.json();case 6:(n=e.sent).success&&(a({type:"UPDATE_CART",cart:n.data}),N(!1));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(){return(C=Object(r.a)(c.a.mark((function t(a){var n,r,s,l,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="https://vue-course-api.hexschool.io/api/jay/cart/".concat(a),t.next=3,fetch(n,{method:"DELETE"});case 3:return r=t.sent,t.next=6,r.json();case 6:s=t.sent,l=s.success,o=s.message,l&&(w(),e.success(o));case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function S(){return(S=Object(r.a)(c.a.mark((function t(n){var r,s,l,o,u;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"https://vue-course-api.hexschool.io/api/jay/coupon",r={data:{code:n}},t.next=4,fetch("https://vue-course-api.hexschool.io/api/jay/coupon",{method:"POST",body:JSON.stringify(r),headers:{"content-type":"application/json"}});case 4:return s=t.sent,t.next=7,s.json();case 7:l=t.sent,o=l.success,u=l.message,o?(a({type:"UPDATE_PRICE",price:l.data.final_total}),e.success(u)):e.error(u);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(l.useEffect)((function(){w()}),[]),o.a.createElement("div",{className:"my-4 mx-auto p-2 min-h-screen"},o.a.createElement("h2",{className:"text-xl p-2 w-full border border-teal-500 text-teal-500 rounded-lg"},"\u60a8\u7684\u8cfc\u7269\u8eca"),!v&&o.a.createElement("div",{className:"w-full text-right grid grid-cols-1 md:grid-cols-2 gap-2 lg:gap-4"},n.carts.length?o.a.createElement(o.a.Fragment,null,o.a.createElement("ul",{className:"w-full"},o.a.createElement("li",{className:"p-2 flex border-b-2 items-center justify-around border-gray-600"},o.a.createElement("p",null,"\u540d\u5b57"),o.a.createElement("p",null,"\u6578\u91cf"),o.a.createElement("p",null,"\u50f9\u683c"),o.a.createElement("p",null,"\u522a\u9664")),n.carts.map((function(e,t){return o.a.createElement("li",{className:"ml-auto p-2 flex border-b-2 items-center justify-around border-gray-600",key:t},o.a.createElement("p",null,e.product.title),o.a.createElement("p",null,e.qty," ",e.product.unit),o.a.createElement("p",{className:"ml-4"},e.total," \u5143"),o.a.createElement("button",{className:"bg-red-500 hover:bg-red-600 text-white font-bold py-1 px-2 rounded-lg",onClick:function(){return function(e){return C.apply(this,arguments)}(e.id)}},"\u522a\u9664"))}))),o.a.createElement("div",{className:"w-full"},o.a.createElement("p",{className:"p-2"},"\u5171 ",n.carts.length," \u4ef6\uff0c\u7e3d\u5171: ",n.final_total," \u5143"),o.a.createElement("div",{className:"p-2"},o.a.createElement("input",{className:"p-2 text-indigo-400 border border-teal-400 rounded-md",onChange:function(e){var t=e.target.value;f(t)},placeholder:"\u8f38\u5165\u512a\u60e0\u5377\u4ee3\u78bc",value:h||""}),o.a.createElement("button",{className:"ml-2 bg-indigo-400 hover:bg-indigo-600 text-white font-bold py-1 px-2 rounded-lg",onClick:function(){return function(e){return S.apply(this,arguments)}(h)}},"\u512a\u60e0")),j?o.a.createElement(b,null):o.a.createElement("button",{className:"mr-2 mt-2 bg-teal-400 hover:bg-teal-600 text-white font-bold py-1 px-2 rounded-lg",onClick:function(){y(!0)}},"\u524d\u5f80\u7d50\u5e33"),o.a.createElement("button",{className:"bg-blue-400 hover:bg-blue-600 text-white font-bold py-1 px-2 rounded-lg",onClick:function(){t.push("/shop-react/shop")}},"\u8fd4\u56de"))):o.a.createElement("h3",{className:"text-4xl my-4 text-center"},"nothings")))}}}]);
//# sourceMappingURL=12.ec19acae.chunk.js.map