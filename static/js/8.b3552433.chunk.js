(this["webpackJsonpshop-react"]=this["webpackJsonpshop-react"]||[]).push([[8],{49:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(11),r=n(0),c=n.n(r);function l(e){var t=e.num,n=e.setDePage,l=e.dePage,o=Object(r.useState)([]),u=Object(a.a)(o,2),s=u[0],i=u[1];Object(r.useEffect)((function(){!function(e){var t=[];if(e>2){for(var n=1;n<e+1;n++)t.push(n);i(t)}}(t)}),[t]);return c.a.createElement("ul",{className:"max-w-sm inline-flex mt-2"},s.length>1&&1!==l&&c.a.createElement("li",null,c.a.createElement("button",{className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-l",onClick:function(){return n(l-1)}},"Pre")," "),s.length>1&&s.map((function(e,t){return c.a.createElement("li",{key:t},c.a.createElement("button",{className:l===e?"bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-l":"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-l",onClick:function(){return n(e)}},e))})),s.length>1&&l!==t&&c.a.createElement("li",null," ",c.a.createElement("button",{className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-r",onClick:function(){return n(l+1)}},"Next")))}},62:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return b}));var a=n(13),r=n.n(a),c=n(18),l=n(11),o=n(0),u=n.n(o),s=n(1),i=n(19),p=n(12);function d(e){var t=e.data,n=Object(s.g)(),a=Object(i.b)(),l=Object(o.useContext)(p.a).cartDispatch;function d(){return(d=Object(c.a)(r.a.mark((function e(t){var n,c,o,u,s,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={data:{product_id:t,qty:1}},c="https://vue-course-api.hexschool.io/api/jay/cart",e.next=4,fetch(c,{method:"POST",body:JSON.stringify(n),headers:{"content-type":"application/json"}});case 4:return o=e.sent,e.next=7,o.json();case 7:if(u=e.sent,s=u.message,!u.success){e.next=19;break}return a.show(s),c="https://vue-course-api.hexschool.io/api/jay/cart",e.next=14,fetch(c);case 14:return o=e.sent,e.next=17,o.json();case 17:(i=e.sent).success&&l({type:"UPDATE_CART",cart:i.data});case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return u.a.createElement("li",{id:t.id,className:"mb-1 rounded overflow-hidden shadow-lg  rounded-lg shadow-md relative h-auto"},u.a.createElement("img",{src:t.imageUrl,alt:"product",className:"w-full h-64 rounded rounded-b-none"}),u.a.createElement("div",{className:"px-5 py-2  inset-x-0 bottom-0 bg-gray-100 w-full  rounded"},u.a.createElement("h3",{className:" flex justify-between text-teal-700 font-bold text-sm mb-2"},u.a.createElement("span",null,t.category," :"),u.a.createElement("span",null,t.title)),u.a.createElement("p",{className:"flex justify-between text-teal-700 text-base"},u.a.createElement("span",null,"\u539f\u50f9: ",t.origin_price,"\u5143"),u.a.createElement("span",null,t.price&&"\u7279\u50f9: ".concat(t.price,"\u5143 "))),u.a.createElement("div",{className:"flex items-center justify-between mt-2"},u.a.createElement("button",{onClick:function(){return function(e){return d.apply(this,arguments)}(t.id)},className:"bg-green-400 hover:bg-green-600 text-white font-bold py-1 px-2 rounded-full"},"ADD"),u.a.createElement("button",{onClick:function(){return e=t.id,void n.push("/shop-react/shop/".concat(e));var e},className:"bg-blue-400 hover:bg-blue-600 text-white font-bold py-1 px-2 rounded-full"},"\u8a73\u7d30\u5167\u5bb9"))))}var f=n(20),m=n(49);function b(){var e=Object(o.useContext)(p.a),t=e.products,n=e.productDispatch,a=Object(o.useState)(!0),s=Object(l.a)(a,2),i=s[0],b=s[1],g=Object(o.useState)(1),h=Object(l.a)(g,2),x=h[0],y=h[1],E=Object(o.useState)(null),v=Object(l.a)(E,2),j=v[0],w=v[1],O=Object(o.useState)("all"),N=Object(l.a)(O,2),k=N[0],C=N[1];function D(){return(D=Object(c.a)(r.a.mark((function e(t){var a,c,l,o,u,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="https://vue-course-api.hexschool.io/api/jay/products?page=".concat(t),e.next=3,fetch(a);case 3:return c=e.sent,e.next=6,c.json();case 6:l=e.sent,o=l.success,u=l.products,s=l.pagination,o&&(n({type:"UPDATE_PRODUCT",product:u}),b(!1),w(s.total_pages));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}if(Object(o.useEffect)((function(){!function(e){D.apply(this,arguments)}(x)}),[x]),i)return u.a.createElement(f.a,null);if(!t)return u.a.createElement("div",null," error 404");var P,S,_="m-2 bg-white w-16 text-teal-600 text-white font-bold py-1 px-2 rounded-full",T="m-2 bg-teal-500 w-16 hover:bg-teal-600 text-white font-bold py-1 px-2 rounded-full",A=t.filter((function(e){return 1===e.is_enabled})),U=t.map((function(e){return e.category})).filter((function(e,t,n){return n.indexOf(e)===t}));return u.a.createElement("div",{className:"container mx-auto h-auto min-h-screen"},u.a.createElement("div",null,u.a.createElement("button",{onClick:function(){return C("all")},className:"all"===k?_:T},"\u5168\u90e8"),U&&U.map((function(e,t){return u.a.createElement("button",{onClick:function(){return C(e)},key:t,className:k===e?_:T},e)}))),u.a.createElement("ul",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-2 lg:gap-4"},A.length>0?(P=A,S=k,"all"===S?P:P.filter((function(e){return e.category===S}))).map((function(e){return u.a.createElement(d,{data:e,key:e.id})})):u.a.createElement("div",null,"\u73fe\u5728\u9084\u6c92\u6709\u5546\u54c1\u55b2~"),u.a.createElement(m.a,{dePage:x,setDePage:y,num:j})))}}}]);
//# sourceMappingURL=8.b3552433.chunk.js.map