{"version":3,"sources":["components/Login.js"],"names":["Login","setAuth","history","useHistory","useState","username","password","user","setUser","loading","setLoading","handleChange","event","target","name","value","preUser","handleLogin","a","preventDefault","fetch","method","body","JSON","stringify","credentials","headers","response","json","success","push","onSubmit","type","placeholder","onChange"],"mappings":"kPAIe,SAASA,EAAT,GAA6B,IAAZC,EAAW,EAAXA,QACxBC,EAAUC,cADyB,EAEjBC,mBAAS,CAC/BC,SAAU,GACVC,SAAU,KAJ6B,mBAElCC,EAFkC,KAE5BC,EAF4B,OAOXJ,oBAAS,GAPE,mBAOlCK,EAPkC,KAOzBC,EAPyB,KAUnCC,EAAe,SAAAC,GAAU,IAAD,EACJA,EAAMC,OAAtBC,EADoB,EACpBA,KAAMC,EADc,EACdA,MACdP,GAAQ,SAAAQ,GACN,OAAO,2BACFA,GADL,kBAEGF,EAAOC,QAKRE,EAAW,uCAAG,WAAOL,GAAP,eAAAM,EAAA,6DAClBN,EAAMO,iBACNT,GAAW,GACC,mDAHM,SAIKU,MADX,mDACsB,CAChCC,OAAQ,OACRC,KAAMC,KAAKC,UAAUjB,GACrBkB,YAAa,UACbC,QAAS,CAAE,eAAgB,sBARX,cAIZC,EAJY,gBAUGA,EAASC,OAVZ,cAWPC,UACTnB,GAAW,GACXT,GAAQ,GACRC,EAAQ4B,KAAK,cAdG,4CAAH,sDAkBjB,OAAIrB,EACK,kBAAC,IAAD,MAKP,0BAAMsB,SAAUd,GACd,2BACEe,KAAK,QACLC,YAAY,QACZnB,KAAK,WACLoB,SAAUvB,EACVI,MAAOR,EAAKF,WACd,2BACE2B,KAAK,mBACLC,YAAY,WACZnB,KAAK,WACLoB,SAAUvB,EACVI,MAAOR,EAAKD,WACd,4BAAQ0B,KAAK,UAAb,UACA","file":"static/js/9.7029dda1.chunk.js","sourcesContent":["import React, { useState } from 'react'\r\nimport { useHistory } from 'react-router-dom';\r\nimport Loading from './Loading/Loading';\r\n\r\nexport default function Login({ setAuth }) {\r\n  const history = useHistory();\r\n  const [user, setUser] = useState({\r\n    username: '',\r\n    password: ''\r\n  });\r\n\r\n  const [loading, setLoading] = useState(false);\r\n\r\n\r\n  const handleChange = event => {\r\n    const { name, value } = event.target;\r\n    setUser(preUser => {\r\n      return {\r\n        ...preUser,\r\n        [name]: value\r\n      }\r\n    });\r\n  }\r\n\r\n  const handleLogin = async (event) => {\r\n    event.preventDefault();\r\n    setLoading(true);\r\n    const Url = 'https://vue-course-api.hexschool.io/admin/signin';\r\n    const response = await fetch(Url, {\r\n      method: \"POST\",\r\n      body: JSON.stringify(user),\r\n      credentials: 'include',\r\n      headers: { 'content-type': 'application/json' }\r\n    });\r\n    const result = await response.json();\r\n    if (result.success) {\r\n      setLoading(false);\r\n      setAuth(true);\r\n      history.push('/products');\r\n    }\r\n  }\r\n\r\n  if (loading) {\r\n    return <Loading />\r\n  }\r\n\r\n\r\n  return (\r\n    <form onSubmit={handleLogin}>\r\n      <input\r\n        type=\"email\"\r\n        placeholder='email'\r\n        name='username'\r\n        onChange={handleChange}\r\n        value={user.username} />\r\n      <input\r\n        type=\"current-password\"\r\n        placeholder='password'\r\n        name=\"password\"\r\n        onChange={handleChange}\r\n        value={user.password} />\r\n      <button type='submit'>Submit</button>\r\n      <button>Back</button>\r\n    </form>\r\n  )\r\n}"],"sourceRoot":""}