(this["webpackJsonpshop-react"]=this["webpackJsonpshop-react"]||[]).push([[3],{49:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(10),c=a(0),r=a.n(c);function o(e){var t=e.num,a=e.setDePage,o=e.dePage,l=Object(c.useState)([]),u=Object(n.a)(l,2),s=u[0],p=u[1];Object(c.useEffect)((function(){!function(e){var t=[];if(e>2){for(var a=1;a<e+1;a++)t.push(a);p(t)}}(t)}),[t]);return r.a.createElement("ul",{className:"max-w-sm inline-flex mt-2"},s.length>1&&1!==o&&r.a.createElement("li",null,r.a.createElement("button",{className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-l",onClick:function(){return a(o-1)}},"Pre")," "),s.length>1&&s.map((function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("button",{className:o===e?"bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-l":"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-l",onClick:function(){return a(e)}},e))})),s.length>1&&o!==t&&r.a.createElement("li",null," ",r.a.createElement("button",{className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-r",onClick:function(){return a(o+1)}},"Next")))}},50:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=new Date;a.setTime(1e3*e);var n=a.getFullYear(),r=c(a.getMonth()+1),o=c(a.getDate()),l=c(a.getHours()),u=c(a.getMinutes());return t?"".concat(n,"-").concat(r,"-").concat(o,"- ").concat(l,": ").concat(u):"".concat(n,"-").concat(r,"-").concat(o)};function c(e){return e<10&&(e="0".concat(e)),e}},59:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return E}));var n=a(11),c=a.n(n),r=a(21),o=a(12),l=a(17),u=a(10),s=a(0),p=a.n(s),d=a(18),i=a(50);function m(e){var t=e.open,a=e.setOpen,n=e.coupon,c=e.handleChange,r=e.updateCoupon,o=e.addCoupon,l=e.handleCancel;return p.a.createElement(p.a.Fragment,null,p.a.createElement("button",{className:"my-2 bg-teal-500 hover:bg-teal-700 text-white font-bold py-1 px-2 rounded",onClick:function(){return a(!t)}},"Add Coupon"),t&&p.a.createElement("ul",null,p.a.createElement("label",{htmlFor:"title"},"\u512a\u60e0\u5377\u540d\u7a31:"),p.a.createElement("input",{id:"title",value:n.title||"",name:"title",onChange:c}),p.a.createElement("label",{htmlFor:"code"},"\u4ee3\u78bc:"),p.a.createElement("input",{id:"code",value:n.code||"",name:"code",onChange:c}),p.a.createElement("label",{htmlFor:"percent"},"\u6298\u6263"),p.a.createElement("input",{id:"percent",value:n.percent||"",name:"percent",onChange:c}),p.a.createElement("label",{htmlFor:"due_date"},"\u4f7f\u7528\u671f\u9650:"),p.a.createElement("input",{id:"due_date",type:"date",value:Object(i.a)(n.due_date)||"",name:"due_date",onChange:c}),p.a.createElement("label",{htmlFor:"is_enable"},"\u662f\u5426\u555f\u7528:"),p.a.createElement("input",{id:"is_enable",type:"checkbox",checked:1===n.is_enabled||"",name:"is_enabled",onChange:c}),n.hasOwnProperty("id")?p.a.createElement("button",{onClick:r},"Update"):p.a.createElement("button",{onClick:o},"add"),p.a.createElement("button",{onClick:l},"Cancel")))}function b(e){var t=e.coupon,a=e.updateIsenable,n=e.openUpdateCoupon,c=e.updateDate;return p.a.createElement("tr",{className:"text-right"},p.a.createElement("td",{className:"border px-4 py-2"},t.title),p.a.createElement("td",{className:"border px-4 py-2"},t.code),p.a.createElement("td",{className:"border px-4 py-2"},t.percent/100," \u6298"),p.a.createElement("td",{className:"border px-4 py-2"},Object(i.a)(t.due_date)),p.a.createElement("td",{className:"border px-4 py-2"},p.a.createElement("input",{type:"checkbox",onChange:function(e){return a(e,t)},checked:1===t.is_enabled})),p.a.createElement("td",{className:"border px-4 py-2"},p.a.createElement("button",{className:"bg-teal-500 hover:bg-teal-700 text-white font-bold py-1 px-2 rounded",onClick:function(){return n(t)}},"\u7de8\u8f2f")),p.a.createElement("td",{className:"border px-4 py-2"}," ",p.a.createElement("button",{className:"bg-red-500 hover:bg-red-700 text-white font-bold py-1 px-2 rounded",onClick:function(){c(null,t.id,"DELETE")}},"\u522a\u9664")))}var h=a(19),f=a(49);function E(){var e=Object(d.b)(),t=Object(s.useState)(null),a=Object(u.a)(t,2),n=a[0],i=a[1],E=Object(s.useState)({}),g=Object(u.a)(E,2),y=g[0],x=g[1],v=Object(s.useState)(!0),O=Object(u.a)(v,2),j=O[0],C=O[1],N=Object(s.useState)(!1),k=Object(u.a)(N,2),_=k[0],w=k[1],P=Object(s.useState)(1),S=Object(u.a)(P,2),T=S[0],D=S[1],F=Object(s.useState)(null),U=Object(u.a)(F,2),J=U[0],A=U[1];function I(e){return M.apply(this,arguments)}function M(){return(M=Object(l.a)(c.a.mark((function e(t){var a,n,r,o,l,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="https://vue-course-api.hexschool.io/api/jay/admin/coupons?page=".concat(t),e.next=3,fetch(a,{credentials:"include"});case 3:return n=e.sent,e.next=6,n.json();case 6:r=e.sent,o=r.success,l=r.pagination,u=r.coupons,o&&(i(u),A(l.total_pages),C(!1));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(e,t,a){return L.apply(this,arguments)}function L(){return(L=Object(l.a)(c.a.mark((function t(a,n,r){var l,u,s,p,d;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l=n?"https://vue-course-api.hexschool.io/api/jay/admin/coupon/".concat(n):"https://vue-course-api.hexschool.io/api/jay/admin/coupon",t.next=3,fetch(l,{method:r,body:("PUT"===r||"POST"===r)&&JSON.stringify({data:Object(o.a)({},a)}),credentials:"include",headers:{"content-type":("PUT"===r||"POST"===r)&&"application/json"}});case 3:return u=t.sent,t.next=6,u.json();case 6:s=t.sent,p=s.success,d=s.message,p?(I(),d&&e.success(d)):d&&e.error(d);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Y(e,t){H(Object(o.a)(Object(o.a)({},t),{},{is_enabled:e.target.checked?1:0}),t.id,"PUT")}function q(e){x(e),w(!0)}Object(s.useEffect)((function(){I(T)}),[T]);return j?p.a.createElement(h.a,null):p.a.createElement("div",{className:"container"},p.a.createElement("h2",{className:"text-4xl"},"Coupon"),p.a.createElement(m,{open:_,setOpen:w,coupon:y,handleChange:function(e){var t=e.target,a=t.name,n=t.value,c=t.checked,l=t.valueAsNumber;"due_date"===a?n=l/1e3:"is_enabled"===a&&(n=c?1:0),x((function(e){return Object(o.a)(Object(o.a)({},e),{},Object(r.a)({},a,n))}))},updateCoupon:function(){H(y,y.id,"PUT"),w(!1)},addCoupon:function(){H(y,null,"POST"),x({}),w(!1)},handleCancel:function(){x({}),w(!1)}}),p.a.createElement("table",{className:"table-auto w-full"},p.a.createElement("thead",null,p.a.createElement("tr",null,p.a.createElement("th",{className:"border px-4 py-2"},"\u512a\u60e0\u5377"),p.a.createElement("th",{className:"border px-4 py-2"},"\u4ee3\u78bc"),p.a.createElement("th",{className:"border px-4 py-2"},"\u6298\u6263"),p.a.createElement("th",{className:"border px-4 py-2"},"\u4f7f\u7528\u671f\u9650"),p.a.createElement("th",{className:"border px-4 py-2"},"\u4f7f\u7528"),p.a.createElement("th",{className:"border px-4 py-2"},"\u7de8\u8f2f"),p.a.createElement("th",{className:"border px-4 py-2"},"\u522a\u9664"))),p.a.createElement("tbody",null,n&&n.map((function(e,t){return p.a.createElement(b,{key:t,coupon:e,updateIsenable:Y,openUpdateCoupon:q,updateDate:H})})))),p.a.createElement(f.a,{dePage:T,setDePage:D,num:J}))}}}]);
//# sourceMappingURL=3.ba25e117.chunk.js.map