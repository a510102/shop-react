{"version":3,"sources":["components/Shop/ShopProduct.js","components/Shop/Shop.js"],"names":["Product","data","history","useHistory","dispatch","useContext","ShopCartContext","handleAddToCart","id","a","product","product_id","qty","Url","fetch","method","body","JSON","stringify","headers","response","json","success","datas","type","cart","className","category","title","src","image","alt","origin_price","price","onClick","push","Shop","useState","products","setProducts","loading","setLoading","useEffect","fetchProducts","Loading","filterProducts","filter","is_enabled","length","map","key"],"mappings":"uPAIe,SAASA,EAAT,GAA4B,IAATC,EAAQ,EAARA,KACxBC,EAAUC,cACRC,EAAaC,qBAAWC,KAAxBF,SAEFG,EAAe,uCAAG,WAAOC,GAAP,qBAAAC,EAAA,6DACdC,EAAU,CAAET,KAAM,CAAEU,WAAYH,EAAII,IAAK,IAC3CC,EAAM,mDAFU,SAGCC,MAAMD,EAAK,CAC5BE,OAAQ,OACRC,KAAMC,KAAKC,UAAUR,GACrBS,QAAS,CAAE,eAAgB,sBANX,cAGhBC,EAHgB,gBAQCA,EAASC,OARV,kBASTC,QATS,wBAUhBT,EAAM,mDAVU,UAWCC,MAAMD,GAXP,eAWhBO,EAXgB,iBAYIA,EAASC,OAZb,SAYVE,EAZU,QAaND,SACNlB,EAAS,CAAEoB,KAAM,cAAeC,KAAMF,EAAMtB,OAdhC,4CAAH,sDAuBrB,OACI,wBAAIO,GAAIP,EAAKO,GAAIkB,UAAU,WACvB,wBAAIA,UAAU,iBACTzB,EAAK0B,SADV,MACuB1B,EAAK2B,OAE5B,yBAAKF,UAAU,cAAcG,IAAK5B,EAAK6B,MAAOC,IAAI,YAClD,uBAAGL,UAAU,iBAAb,iBAAkCzB,EAAK+B,aAAvC,WAAwD/B,EAAKgC,OAAL,wBAAqBhC,EAAKgC,MAA1B,aACxD,4BAAQC,QAAS,kBAAM3B,EAAgBN,EAAKO,MAA5C,OACA,4BAAQ0B,QAAS,kBAZI1B,EAYsBP,EAAKO,QAXpDN,EAAQiC,KAAR,gBAAsB3B,IAD1B,IAA6BA,IAYrB,6B,kBChCG,SAAS4B,IAAQ,IAAD,EAEKC,mBAAS,MAFd,mBAEpBC,EAFoB,KAEVC,EAFU,OAGGF,oBAAS,GAHZ,mBAGpBG,EAHoB,KAGXC,EAHW,KAI3BC,qBAAU,WACNC,MAED,IAEH,IAAMA,EAAa,uCAAG,8BAAAlC,EAAA,4DACN,uDADM,SAEKK,MADX,wDADM,cAEZM,EAFY,gBAGEA,EAASC,OAHX,OAGZE,EAHY,OAIlBgB,EAAYhB,EAAMe,UAClBG,GAAW,GALO,2CAAH,qDAQnB,GAAID,EACA,OAAO,kBAACI,EAAA,EAAD,MAGX,IAAKN,EACD,OAAO,2CAEX,IAAMO,EAAiBP,EAASQ,QAAO,SAAA7C,GAAI,OAAwB,IAApBA,EAAK8C,cACpD,OACI,wBAAIrB,UAAU,eAENmB,EAAeG,OAAS,EAAIH,EAAeI,KAAI,SAAAhD,GAAI,OAAI,kBAAC,EAAD,CAAaA,KAAMA,EAAMiD,IAAKjD,EAAKO,QACtF","file":"static/js/3.76da5be3.chunk.js","sourcesContent":["import React, { useContext } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { ShopCartContext } from './ShopCartContext';\r\n\r\nexport default function Product({ data }) {\r\n    const history = useHistory();\r\n    const { dispatch } = useContext(ShopCartContext);\r\n\r\n    const handleAddToCart = async (id) => {\r\n        const product = { data: { product_id: id, qty: 1 } };\r\n        let Url = 'https://vue-course-api.hexschool.io/api/jay/cart';\r\n        let response = await fetch(Url, {\r\n            method: \"POST\",\r\n            body: JSON.stringify(product),\r\n            headers: { 'content-type': 'application/json' }\r\n        });\r\n        const result = await response.json();\r\n        if (result.success) {\r\n            Url = 'https://vue-course-api.hexschool.io/api/jay/cart';\r\n            response = await fetch(Url);\r\n            const datas = await response.json();\r\n            if (datas.success) {\r\n                dispatch({ type: \"UPDATE_CART\", cart: datas.data })\r\n            }\r\n        }\r\n    }\r\n\r\n    function handlePathToProduct(id) {\r\n        history.push(`/shop/${id}`)\r\n    }\r\n\r\n    return (\r\n        <li id={data.id} className=\"product\">\r\n            <h3 className='product-title'>\r\n                {data.category} : {data.title}\r\n            </h3>\r\n            <img className='product-img' src={data.image} alt=\"product\" />\r\n            <p className='product-price'>原價: {data.origin_price} 元 {data.price && `特價: ${data.price} 元 `}</p>\r\n            <button onClick={() => handleAddToCart(data.id)}>ADD</button>\r\n            <button onClick={() => handlePathToProduct(data.id)}>詳細內容</button>\r\n        </li>\r\n    )\r\n}","import React, { useState, useEffect } from 'react'\r\nimport ShopProduct from './ShopProduct';\r\nimport Loading from '../Loading/Loading';\r\nimport './shop.scss';\r\n\r\n\r\n\r\nexport default function Shop() {\r\n\r\n    const [products, setProducts] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n    useEffect(() => {\r\n        fetchProducts();\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [])\r\n\r\n    const fetchProducts = async () => {\r\n        const Url = 'https://vue-course-api.hexschool.io/api/jay/products';\r\n        const response = await fetch(Url);\r\n        const datas = await response.json();\r\n        setProducts(datas.products);\r\n        setLoading(false);\r\n    }\r\n\r\n    if (loading) {\r\n        return <Loading />\r\n    }\r\n\r\n    if (!products) {\r\n        return <div> error 404</div>\r\n    }\r\n    const filterProducts = products.filter(data => data.is_enabled === 1);\r\n    return (\r\n        <ul className=\"productlist\">\r\n            {\r\n                filterProducts.length > 0 ? filterProducts.map(data => <ShopProduct data={data} key={data.id} />) : (\r\n                    <div>現在還沒有商品喲~</div>)\r\n            }\r\n        </ul>\r\n    )\r\n}"],"sourceRoot":""}