{"version":3,"sources":["components/Shop/ProductSelf.js","hooks/useFetchData.js"],"names":["ProductSelf","id","useParams","history","useHistory","alert","useAlert","dispatch","useDispatch","useState","qty","setQty","url","data","loading","state","setState","useEffect","date","fetch","then","res","json","useFetchData","a","product","product_id","Url","method","body","JSON","stringify","headers","response","result","success","message","datas","type","cart","error","Loading","title","category","content","origin_price","price","description","unit","imageUrl","className","src","alt","htmlFor","onChange","event","value","target","map","item","key","onClick","addProductToCart","push"],"mappings":"0PAOe,SAASA,IAAe,IAC7BC,EAAOC,cAAPD,GACFE,EAAUC,cACVC,EAAQC,cACRC,EAAWC,cAJmB,EAKdC,mBAAS,GALK,mBAK7BC,EAL6B,KAKxBC,EALwB,OCLV,SAAAC,GAAQ,IAAD,EACPH,mBAAS,CAAEI,KAAM,KAAMC,SAAS,IADzB,mBAC1BC,EAD0B,KACnBC,EADmB,KAYjC,OATAC,qBAAU,WACRD,GAAS,SAAAD,GAAK,MAAK,CAAEF,KAAME,EAAMG,KAAMJ,SAAS,MAChDK,MAAMP,GACHQ,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UAChBF,MAAK,SAAAP,GACJG,EAAS,CAAEH,OAAMC,SAAS,SAE7B,CAACF,IAEGG,EDDmBQ,CAAa,uDAAD,OAAwDtB,IAAtFY,EAN4B,EAM5BA,KAN4B,4CAQpC,WAAgCZ,EAAIS,GAApC,2BAAAc,EAAA,6DACQC,EAAU,CAAEC,WAAYzB,EAAIS,OAC9BiB,EAAM,mDAFZ,SAGuBR,MAAMQ,EAAK,CAC9BC,OAAQ,OACRC,KAAMC,KAAKC,UAAU,CAAElB,KAAK,eAAMY,KAClCO,QAAS,CAAE,eAAgB,sBAN/B,cAGMC,EAHN,gBAQuBA,EAASX,OARhC,UAQQY,EARR,OASUC,EAAqBD,EAArBC,QAASC,EAAYF,EAAZE,SACbD,EAVN,wBAWI9B,EAAM8B,QAAQC,GACdT,EAAM,mDAZV,UAaqBR,MAAMQ,GAb3B,eAaIM,EAbJ,iBAcwBA,EAASX,OAdjC,SAcUe,EAdV,QAecF,SACR5B,EAAS,CAAE+B,KAAM,cAAeC,KAAMF,EAAMxB,OAhBlD,wBAmBIR,EAAMmC,MAAMJ,GAnBhB,6CARoC,sBAqCpC,GArCoC,EAMtBtB,QAgCZ,OAAO,kBAAC2B,EAAA,EAAD,MAtC2B,MAyCmD5B,EAAKY,QAApFiB,EAzC4B,EAyC5BA,MAAOC,EAzCqB,EAyCrBA,SAAUC,EAzCW,EAyCXA,QAASC,EAzCE,EAyCFA,aAAcC,EAzCZ,EAyCYA,MAAOC,EAzCnB,EAyCmBA,YAAaC,EAzChC,EAyCgCA,KAAMC,EAzCtC,EAyCsCA,SAC1E,OACE,yBAAKC,UAAU,8CACb,yBAAKA,UAAU,oBACb,yBAAKC,IAAKF,EAAUG,IAAI,OAAOF,UAAU,YAE3C,yBAAKA,UAAU,0CACb,yBAAKA,UAAU,gCACb,wBAAIA,UAAU,6BAA6BP,EAA3C,KAAuDD,GACvD,uBAAGQ,UAAU,4BAAb,iBACA,uBAAGA,UAAU,SAASN,GACtB,uBAAGM,UAAU,6BAAb,iBACA,uBAAGA,UAAU,QAAQH,GACrB,uBAAGG,UAAU,SAAb,gBAAyBL,EAAzB,YAA2CG,GAC1CF,GAAS,uBAAGI,UAAU,SAAb,gBAAyBJ,EAAzB,aAAqCE,IAEjD,yBAAKE,UAAU,gCACb,yBAAKA,UAAU,YACb,2BAAOA,UAAU,4DAA4DG,QAAQ,OAArF,6BAGA,4BACEpD,GAAG,MACHiD,UAAU,6KACVI,SAjCZ,SAAsBC,GAAQ,IACpBC,EAAUD,EAAME,OAAhBD,MACR7C,EAAO6C,IAgCGA,MAAO9C,GACN,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,IAAIgD,KAAI,SAAAC,GAAI,OACvC,4BAAQC,IAAKD,EAAMH,MAAOG,GAAOA,QAIvC,yBAAKT,UAAU,8BACb,4BACEA,UAAU,uEACVW,QAAS,kBA3Ee,6CA2ETC,CAAiB7D,EAAIS,KAFtC,kCAGA,4BACEwC,UAAU,uEACVW,QAAS,WAAQ1D,EAAQ4D,KAAK,sBAFhC","file":"static/js/13.9ef67ec4.chunk.js","sourcesContent":["import React, { useState } from 'react';\nimport { useParams, useHistory } from 'react-router-dom';\nimport { useAlert } from 'react-alert';\nimport { useDispatch } from 'react-redux';\nimport Loading from '../Loading/Loading';\nimport { useFetchData } from '../../hooks/useFetchData';\n\nexport default function ProductSelf() {\n  const { id } = useParams();\n  const history = useHistory();\n  const alert = useAlert();\n  const dispatch = useDispatch();\n  const [qty, setQty] = useState(1);\n  const { data, loading } = useFetchData(`https://vue-course-api.hexschool.io/api/jay/product/${id}`);\n\n  async function addProductToCart(id, qty) {\n    const product = { product_id: id, qty }\n    let Url = 'https://vue-course-api.hexschool.io/api/jay/cart';\n    let response = await fetch(Url, {\n      method: 'POST',\n      body: JSON.stringify({ data: { ...product } }),\n      headers: { 'content-type': 'application/json' }\n    });\n    const result = await response.json();\n    const { success, message } = result;\n    if (success) {\n      alert.success(message)\n      Url = 'https://vue-course-api.hexschool.io/api/jay/cart';\n      response = await fetch(Url);\n      const datas = await response.json();\n      if (datas.success) {\n        dispatch({ type: \"UPDATE_CART\", cart: datas.data })\n      }\n    } else {\n      alert.error(message)\n    }\n\n  }\n\n  function handleChange(event) {\n    const { value } = event.target;\n    setQty(value);\n  }\n\n  if (loading) {\n    return <Loading />\n  }\n\n  const { title, category, content, origin_price, price, description, unit, imageUrl } = data.product;\n  return (\n    <div className='container w-ful flex flex-col mx-auto py-1'>\n      <div className='max-w-lg mx-auto'>\n        <img src={imageUrl} alt='food' className='w-full' />\n      </div>\n      <div className='flex flex-wrap max-w-lg w-full mx-auto'>\n        <div className='w-full md:w-1/2 mb-6 md:mb-0'>\n          <h2 className='text-3xl font-medium mb-3'>{category}: {title}</h2>\n          <p className='text-xl font-medium mb-1'>內容:</p>\n          <p className=' mb-3'>{content}</p>\n          <p className=' mb-1 text-xl font-medium'>描述:</p>\n          <p className='mb-3'>{description}</p>\n          <p className=' mb-3'>原價:{origin_price}元 / {unit}</p>\n          {price && <p className=' mb-3'>特價:{price} 元 / {unit}</p>}\n        </div>\n        <div className=\"w-full md:w-1/2 mb-6 md:mb-0\">\n          <div className='relative'>\n            <label className=\"block  tracking-wide text-gray-700 text-sm font-bold mb-2\" htmlFor=\"qty\">\n              選擇數量:\n              </label>\n            <select\n              id='qty'\n              className='block appearance-none w-full bg-gray-200 border border-gray-200 text-gray-700 py-3 px-4 pr-8 rounded leading-tight focus:outline-none focus:bg-white focus:border-gray-500'\n              onChange={handleChange}\n              value={qty}>\n              {[1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map(item => (\n                <option key={item} value={item}>{item}</option>\n              ))}\n            </select>\n          </div>\n          <div className='mt-2 flex justify-between '>\n            <button\n              className='bg-teal-500 hover:bg-teal-700 text-white font-bold py-1 px-2 rounded'\n              onClick={() => addProductToCart(id, qty)}>加入購物車</button>\n            <button\n              className='bg-blue-500 hover:bg-blue-700 text-white font-bold py-1 px-2 rounded'\n              onClick={() => { history.push('/shop-react/shop') }}>返回</button>\n          </div>\n        </div>\n      </div>\n    </div >\n  )\n\n}","import { useEffect, useState } from 'react'\n\nexport const useFetchData = url => {\n  const [state, setState] = useState({ data: null, loading: true });\n\n  useEffect(() => {\n    setState(state => ({ data: state.date, loading: true }));\n    fetch(url)\n      .then(res => res.json())\n      .then(data => {\n        setState({ data, loading: false })\n      })\n  }, [url])\n\n  return state\n};"],"sourceRoot":""}