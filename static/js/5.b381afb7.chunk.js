(this["webpackJsonpshop-react"]=this["webpackJsonpshop-react"]||[]).push([[5],{49:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(10),r=n(0),c=n.n(r);function l(e){var t=e.num,n=e.setDePage,l=e.dePage,u=Object(r.useState)([]),o=Object(a.a)(u,2),i=o[0],s=o[1];Object(r.useEffect)((function(){!function(e){var t=[];if(e>2){for(var n=1;n<e+1;n++)t.push(n);s(t)}}(t)}),[t]);return c.a.createElement("ul",{className:"max-w-sm inline-flex"},1!==l&&c.a.createElement("li",null,c.a.createElement("button",{className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-l",onClick:function(){return n(l-1)}},"Pre")," "),i.length>1&&i.map((function(e,t){return c.a.createElement("li",{key:t},c.a.createElement("button",{className:l===e?"bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-l":"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-l",onClick:function(){return n(e)}},e))})),l!==t&&c.a.createElement("li",null," ",c.a.createElement("button",{className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-r",onClick:function(){return n(l+1)}},"Next")))}},58:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return E}));var a=n(12),r=n.n(a),c=n(21),l=n(13),u=n(18),o=n(10),i=n(0),s=n.n(i),m=n(19);function p(e){var t=e.open,n=e.setOpen,a=e.product,c=e.handleChange,o=e.updateProduct,m=e.addProduct,p=e.handleCancel,d=e.setProduct,h=e.alert,b=Object(i.useRef)(null);function E(){return(E=Object(u.a)(r.a.mark((function e(){var t,n,a,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.current.files[0],(n=new FormData).append("file-to-upload",t),"https://vue-course-api.hexschool.io/api/jay/admin/upload",e.next=6,fetch("https://vue-course-api.hexschool.io/api/jay/admin/upload",{method:"POST",body:n,credentials:"include"});case 6:return a=e.sent,e.next=9,a.json();case 9:(c=e.sent).success?(d((function(e){return Object(l.a)(Object(l.a)({},e),{},{imageUrl:c.imageUrl})})),h.success("\u4e0a\u50b3\u6210\u529f")):h.error(c.message);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return s.a.createElement(s.a.Fragment,null,s.a.createElement("button",{onClick:function(){n(!t)}},"\u5efa\u7acb\u65b0\u5546\u54c1"),t?s.a.createElement("div",null,s.a.createElement("label",{htmlFor:"category"},"\u985e\u5225:"),s.a.createElement("input",{id:"category",name:"category",value:a.category||"",onChange:c}),s.a.createElement("label",{htmlFor:"title"},"\u5546\u54c1:"),s.a.createElement("input",{id:"title",name:"title",value:a.title||"",onChange:c}),s.a.createElement("label",{htmlFor:"content"},"\u5167\u5bb9:"),s.a.createElement("input",{id:"content",name:"content",value:a.content||"",onChange:c}),s.a.createElement("label",{htmlFor:"description"},"\u63cf\u8ff0:"),s.a.createElement("input",{id:"description",name:"description",value:a.description||"",onChange:c}),s.a.createElement("label",{htmlFor:"image"},"\u8f38\u5165\u5716\u7247\u7db2\u5740"),s.a.createElement("input",{type:"text",className:"form-control",onChange:c,value:a.imageUrl||"",id:"image",name:"imageUrl",placeholder:"\u8acb\u8f38\u5165\u5716\u7247\u9023\u7d50"}),s.a.createElement("label",{htmlFor:"customFile"},"\u6216 \u4e0a\u50b3\u5716\u7247"),s.a.createElement("input",{type:"file",id:"customFile",className:"form-control",ref:b,onChange:function(){return E.apply(this,arguments)}}),a.imageUrl&&s.a.createElement("img",{style:{width:"200px",height:"200px"},src:a.imageUrl,alt:"proPic"}),s.a.createElement("label",{htmlFor:"origin_price"},"\u539f\u50f9:"),s.a.createElement("input",{id:"origin_price",name:"origin_price",value:a.origin_price||"",onChange:c}),s.a.createElement("label",{htmlFor:"price"},"\u7279\u50f9:"),s.a.createElement("input",{id:"price",name:"price",value:a.price||"",onChange:c}),s.a.createElement("label",{htmlFor:"unit"},"\u55ae\u4f4d:"),s.a.createElement("input",{id:"unit",name:"unit",value:a.unit||"",onChange:c}),a.hasOwnProperty("id")?s.a.createElement("button",{onClick:o},"Update"):s.a.createElement("button",{onClick:m},"Add"),s.a.createElement("button",{onClick:p},"\u53d6\u6d88")):null)}function d(e){var t=e.product,n=e.updateEnabled,a=e.openUpdateProduct,r=e.deleteProduct;return s.a.createElement("tr",null,s.a.createElement("td",null,t.title),s.a.createElement("td",null,t.category),s.a.createElement("td",null,t.unit),s.a.createElement("td",null,t.origin_price,"\u5143"),s.a.createElement("td",null,t.price,"\u5143"),s.a.createElement("td",null,s.a.createElement("input",{type:"checkbox",onChange:function(e){return n(e,t)},checked:1===t.is_enabled})),s.a.createElement("td",null,s.a.createElement("button",{onClick:function(){return a(t)}},"\u7de8\u8f2f")),s.a.createElement("td",null," ",s.a.createElement("button",{onClick:function(){return r(t.id)}},"\u522a\u9664")))}var h=n(20),b=n(49);function E(){var e=Object(m.b)(),t=Object(i.useState)(null),n=Object(o.a)(t,2),a=n[0],E=n[1],f=Object(i.useState)(!0),g=Object(o.a)(f,2),y=g[0],j=g[1],O=Object(i.useState)(!1),v=Object(o.a)(O,2),x=v[0],P=v[1],C=Object(i.useState)({}),k=Object(o.a)(C,2),F=k[0],U=k[1],w=Object(i.useState)(1),S=Object(o.a)(w,2),N=S[0],T=S[1],_=Object(i.useState)(null),D=Object(o.a)(_,2),J=D[0],A=D[1];function L(e){return R.apply(this,arguments)}function R(){return(R=Object(u.a)(r.a.mark((function e(t){var n,a,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://vue-course-api.hexschool.io/api/jay/products?page=".concat(t),e.next=3,fetch(n);case 3:return a=e.sent,e.next=6,a.json();case 6:(c=e.sent).success&&(E(c.products),j(!1),A(c.pagination.total_pages));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e,t,n){return z.apply(this,arguments)}function z(){return(z=Object(u.a)(r.a.mark((function t(n,a,c){var u,o,i,s,m;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=a?"https://vue-course-api.hexschool.io/api/jay/admin/product/".concat(a):"https://vue-course-api.hexschool.io/api/jay/admin/product",t.next=3,fetch(u,{method:c,body:("PUT"===c||"POST"===c)&&JSON.stringify({data:Object(l.a)({},n)}),credentials:"include",headers:{"content-type":("PUT"===c||"POST"===c)&&"application/json"}});case 3:return o=t.sent,t.next=6,o.json();case 6:i=t.sent,s=i.success,m=i.message,s?(L(),m&&e.success(m)):m&&e.error(m);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function B(e,t){var n=e.target.checked;q(Object(l.a)(Object(l.a)({},t),{},{is_enabled:n?1:0}),t.id,"PUT")}function G(e){U(e),x||P(!0)}function H(e){q(null,e,"DELETE")}return Object(i.useEffect)((function(){L(N)}),[N]),y?s.a.createElement(h.a,null):s.a.createElement("div",{className:"backProducts"},s.a.createElement("h2",null,"Products"),s.a.createElement(p,{open:x,setOpen:P,product:F,handleChange:function(e){var t=e.target,n=t.name,a=t.value;U((function(e){return Object(l.a)(Object(l.a)({},e),{},Object(c.a)({},n,a))}))},updateProduct:function(){q(F,F.id,"PUT"),P(!1)},addProduct:function(){q(F,null,"POST"),U({}),P(!1)},handleCancel:function(){U({}),P(!1)},setProduct:U,alert:e}),s.a.createElement("table",{className:"backProducts-table"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"\u7522\u54c1"),s.a.createElement("th",null,"\u985e\u5225"),s.a.createElement("th",null,"\u55ae\u4f4d"),s.a.createElement("th",null,"\u539f\u50f9"),s.a.createElement("th",null,"\u7279\u50f9"),s.a.createElement("th",null,"\u555f\u7528"),s.a.createElement("th",null,"\u7de8\u8f2f"),s.a.createElement("th",null,"\u522a\u9664"))),s.a.createElement("tbody",null,a&&a.map((function(e,t){return s.a.createElement(d,{product:e,key:t,updateEnabled:B,openUpdateProduct:G,deleteProduct:H})})))),s.a.createElement(b.a,{dePage:N,setDePage:T,num:J}))}}}]);
//# sourceMappingURL=5.b381afb7.chunk.js.map