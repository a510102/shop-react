(this["webpackJsonpshop-react"]=this["webpackJsonpshop-react"]||[]).push([[8],{54:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(22),r=a(0),c=a.n(r);function l(e){var t=e.num,a=e.setDePage,l=e.dePage,o=Object(r.useState)([]),s=Object(n.a)(o,2),u=s[0],i=s[1];Object(r.useEffect)((function(){!function(e){var t=[];if(e>2){for(var a=1;a<e+1;a++)t.push(a);i(t)}}(t)}),[t]);return c.a.createElement("ul",{className:"max-w-sm inline-flex mt-2"},u.length>1&&1!==l&&c.a.createElement("li",null,c.a.createElement("button",{className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-l",onClick:function(){return a(l-1)}},"Pre")," "),u.length>1&&u.map((function(e,t){return c.a.createElement("li",{key:t},c.a.createElement("button",{className:l===e?"bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-l":"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-l",onClick:function(){return a(e)}},e))})),u.length>1&&l!==t&&c.a.createElement("li",null," ",c.a.createElement("button",{className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-r",onClick:function(){return a(l+1)}},"Next")))}},67:function(e,t,a){"use strict";a.r(t);var n=a(17),r=a.n(n),c=a(23),l=a(22),o=a(0),s=a.n(o),u=a(11),i=a(3),p=a(24),m=s.a.memo((function(e){var t=e.data,a=Object(i.g)(),n=Object(p.b)(),l=Object(u.b)();function o(){return(o=Object(c.a)(r.a.mark((function e(t){var a,c,o,s,u,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={data:{product_id:t,qty:1}},c="https://vue-course-api.hexschool.io/api/jay/cart",e.next=4,fetch(c,{method:"POST",body:JSON.stringify(a),headers:{"content-type":"application/json"}});case 4:return o=e.sent,e.next=7,o.json();case 7:if(s=e.sent,u=s.message,!s.success){e.next=19;break}return n.show(u),c="https://vue-course-api.hexschool.io/api/jay/cart",e.next=14,fetch(c);case 14:return o=e.sent,e.next=17,o.json();case 17:(i=e.sent).success&&l({type:"UPDATE_CART",cart:i.data});case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var m=t.id,d=t.imageUrl,f=t.category,b=t.title,g=t.price,h=t.origin_price;return s.a.createElement("li",{id:m,className:"mb-1 rounded overflow-hidden shadow-lg  rounded-lg shadow-md relative h-auto"},s.a.createElement("div",{className:"relative w-full h-48 mx-auto bg-gray-200"},s.a.createElement("img",{src:d,alt:"product",className:"absolute max-h-full max-w-full top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"})),s.a.createElement("div",{className:"px-5 py-2  inset-x-0 bottom-0 bg-gray-100 w-full  rounded"},s.a.createElement("h3",{className:" flex justify-between text-teal-700 font-bold text-sm mb-2"},s.a.createElement("span",null,f," :"),s.a.createElement("span",null,b)),s.a.createElement("p",{className:"flex justify-between text-teal-700 text-base"},s.a.createElement("span",null,"\u539f\u50f9: ",h,"\u5143"),s.a.createElement("span",null,g&&"\u7279\u50f9: ".concat(g,"\u5143 "))),s.a.createElement("div",{className:"flex items-center justify-between mt-2"},s.a.createElement("button",{onClick:function(){return function(e){return o.apply(this,arguments)}(m)},className:"bg-green-400 hover:bg-green-600 text-white font-bold py-1 px-2 rounded-full"},"ADD"),s.a.createElement("button",{onClick:function(){return e=m,void a.push("/shop-react/shop/".concat(e));var e},className:"bg-blue-400 hover:bg-blue-600 text-white font-bold py-1 px-2 rounded-full"},"\u8a73\u7d30\u5167\u5bb9"))))})),d=a(25),f=a(54);t.default=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.productsState.products})),a=Object(o.useState)(!0),n=Object(l.a)(a,2),i=n[0],p=n[1],b=Object(o.useState)(1),g=Object(l.a)(b,2),h=g[0],x=g[1],y=Object(o.useState)(null),v=Object(l.a)(y,2),E=v[0],j=v[1],w=Object(o.useState)("all"),O=Object(l.a)(w,2),N=O[0],k=O[1];function C(){return(C=Object(c.a)(r.a.mark((function t(a){var n,c,l,o,s,u;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="https://vue-course-api.hexschool.io/api/jay/products?page=".concat(a),t.next=3,fetch(n);case 3:return c=t.sent,t.next=6,c.json();case 6:l=t.sent,o=l.success,s=l.products,u=l.pagination,o&&(e({type:"UPDATE_PRODUCT",product:s}),p(!1),j(u.total_pages));case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}if(console.log("shop"),Object(o.useEffect)((function(){!function(e){C.apply(this,arguments)}(h)}),[h]),i)return s.a.createElement(d.a,null);if(!t)return s.a.createElement("div",null," error 404");var P,S,D="m-2 mx-auto bg-white w-16 text-teal-600 text-white font-bold py-1 px-2 rounded-full",_="m-2 mx-auto bg-teal-500 w-16 hover:bg-teal-600 text-white font-bold py-1 px-2 rounded-full",T=t.filter((function(e){return 1===e.is_enabled})),A=t.map((function(e){return e.category})).filter((function(e,t,a){return a.indexOf(e)===t}));return s.a.createElement("div",{className:"container mx-auto h-auto min-h-screen"},s.a.createElement("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-2 lg:gap-4"},s.a.createElement("button",{onClick:function(){return k("all")},className:"all"===N?D:_},"\u5168\u90e8"),A&&A.map((function(e,t){return s.a.createElement("button",{onClick:function(){return k(e)},key:t,className:N===e?D:_},e)}))),s.a.createElement("ul",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2 lg:gap-4 p-2 md:p-0"},T.length>0?(P=T,S=N,"all"===S?P:P.filter((function(e){return e.category===S}))).map((function(e){return s.a.createElement(m,{data:e,key:e.id})})):s.a.createElement("div",null,"\u73fe\u5728\u9084\u6c92\u6709\u5546\u54c1\u55b2~"),s.a.createElement(f.a,{dePage:h,setDePage:x,num:E})))}}}]);
//# sourceMappingURL=8.61a96ea3.chunk.js.map