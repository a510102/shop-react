(this["webpackJsonpshop-react"]=this["webpackJsonpshop-react"]||[]).push([[8],{55:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(22),c=a(0),r=a.n(c);function l(e){var t=e.num,a=e.setDePage,l=e.dePage,o=Object(c.useState)([]),s=Object(n.a)(o,2),i=s[0],u=s[1];Object(c.useEffect)((function(){!function(e){var t=[];if(e>2){for(var a=1;a<e+1;a++)t.push(a);u(t)}}(t)}),[t]);return r.a.createElement("ul",{className:"max-w-sm inline-flex mt-2"},i.length>1&&1!==l&&r.a.createElement("li",null,r.a.createElement("button",{className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-l",onClick:function(){return a(l-1)}},"Pre")," "),i.length>1&&i.map((function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("button",{className:l===e?"bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-l":"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-l",onClick:function(){return a(e)}},e))})),i.length>1&&l!==t&&r.a.createElement("li",null," ",r.a.createElement("button",{className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-r",onClick:function(){return a(l+1)}},"Next")))}},65:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return f}));var n=a(17),c=a.n(n),r=a(26),l=a(6),o=a(23),s=a(22),i=a(0),u=a.n(i),m=a(24),d=a(11);function p(e){var t=e.open,a=e.setOpen,n=e.product,r=e.handleChange,s=e.updateProduct,m=e.addProduct,d=e.handleCancel,p=e.setProduct,b=e.alert,h=Object(i.useRef)(null);function g(){return(g=Object(o.a)(c.a.mark((function e(){var t,a,n,r,o,s,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.current.files[0],(a=new FormData).append("file-to-upload",t),"https://vue-course-api.hexschool.io/api/jay/admin/upload",e.next=6,fetch("https://vue-course-api.hexschool.io/api/jay/admin/upload",{method:"POST",body:a,credentials:"include"});case 6:return n=e.sent,e.next=9,n.json();case 9:r=e.sent,o=r.success,s=r.message,i=r.imageUrl,o?(p((function(e){return Object(l.a)(Object(l.a)({},e),{},{imageUrl:i})})),b.success("\u4e0a\u50b3\u6210\u529f")):s?b.error(s):b.error("\u4e0a\u50b3\u5931\u6557, \u6a94\u6848\u904e\u5927");case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var f="w-full md:w-1/2 lg:w-1/3  px-3 mt-3 mb-6 md:mb-0",E='appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500" id="grid-last-name',y="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",x=n.category,N=n.title,v=n.content,j=n.description,O=n.imageUrl,w=n.origin_price,P=n.price,k=n.unit,C=n.is_enabled;return u.a.createElement(u.a.Fragment,null,u.a.createElement("button",{className:"my-2 bg-teal-500 hover:bg-teal-700 text-white font-bold py-1 px-2 rounded",onClick:function(){a(!t)}},"\u5efa\u7acb\u65b0\u5546\u54c1"),t?u.a.createElement("div",{className:"w-full"},u.a.createElement("div",{className:"flex flex-wrap mb-6"},u.a.createElement("section",{className:f},u.a.createElement("label",{className:y,htmlFor:"category"},"\u985e\u5225:"),u.a.createElement("input",{className:E,id:"category",name:"category",value:x||"",onChange:r})),u.a.createElement("section",{className:f},u.a.createElement("label",{className:y,htmlFor:"title"},"\u5546\u54c1:"),u.a.createElement("input",{className:E,id:"title",name:"title",value:N||"",onChange:r})),u.a.createElement("section",{className:f},u.a.createElement("label",{htmlFor:"content",className:y},"\u5167\u5bb9:"),u.a.createElement("input",{className:E,id:"content",name:"content",value:v||"",onChange:r})),u.a.createElement("section",{className:f},u.a.createElement("label",{htmlFor:"description",className:y},"\u63cf\u8ff0:"),u.a.createElement("input",{className:E,id:"description",name:"description",value:j||"",onChange:r})),u.a.createElement("section",{className:f},u.a.createElement("label",{htmlFor:"image",className:y},"\u8f38\u5165\u5716\u7247\u7db2\u5740"),u.a.createElement("input",{type:"text",className:E,onChange:r,value:O||"",id:"image",name:"imageUrl",placeholder:"\u8acb\u8f38\u5165\u5716\u7247\u9023\u7d50"})),u.a.createElement("section",{className:f},u.a.createElement("label",{htmlFor:"customFile",className:y},"\u6216 \u4e0a\u50b3\u5716\u7247:"),u.a.createElement("input",{type:"file",id:"customFile",className:E,ref:h,onChange:function(){return g.apply(this,arguments)}}),n.imageUrl&&u.a.createElement("img",{style:{width:"200px",height:"200px"},src:n.imageUrl,alt:"proPic"})),u.a.createElement("section",{className:f},u.a.createElement("label",{htmlFor:"origin_price",className:y},"\u539f\u50f9:"),u.a.createElement("input",{className:E,id:"origin_price",name:"origin_price",value:w||"",onChange:r})),u.a.createElement("section",{className:f},u.a.createElement("label",{htmlFor:"price",className:y},"\u7279\u50f9:"),u.a.createElement("input",{className:E,id:"price",name:"price",value:P||"",onChange:r})),u.a.createElement("section",{className:f},u.a.createElement("label",{htmlFor:"unit",className:y},"\u55ae\u4f4d:"),u.a.createElement("input",{className:E,id:"unit",name:"unit",value:k||"",onChange:r})),u.a.createElement("section",{className:f},u.a.createElement("label",{className:y,htmlFor:"is_enabled"},"\u555f\u7528:"),u.a.createElement("input",{type:"checkbox",checked:1===C||"",onChange:r,id:"is_enabled",name:"is_enabled"})),u.a.createElement("div",{className:"w-full md:w-1/2 lg:w-1/3 px-3 flex p-4 justify-end"},n.hasOwnProperty("id")?u.a.createElement("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-1 px-2 rounded",onClick:s},"Update"):u.a.createElement("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-1 px-2 rounded",onClick:m},"Add"),u.a.createElement("button",{className:"bg-red-500 hover:bg-red-700 text-white font-bold py-1 px-2 rounded ml-3",onClick:d},"\u53d6\u6d88")))):null)}function b(e){var t=e.product,a=e.updateEnabled,n=e.openUpdateProduct,c=e.deleteProduct;return u.a.createElement("tr",{className:"text-right"},u.a.createElement("td",{className:"border  px-4 py-2"},t.title),u.a.createElement("td",{className:"border  px-4 py-2"},t.category),u.a.createElement("td",{className:"border  px-4 py-2"},t.unit),u.a.createElement("td",{className:"border  px-4 py-2"},t.origin_price,"\u5143"),u.a.createElement("td",{className:"border  px-4 py-2"},t.price,"\u5143"),u.a.createElement("td",{className:"border  px-4 py-2"},u.a.createElement("input",{type:"checkbox",onChange:function(e){return a(e,t)},checked:1===t.is_enabled})),u.a.createElement("td",{className:"border px-4 py-2"},u.a.createElement("button",{className:"bg-teal-500 hover:bg-teal-700 text-white font-bold py-1 px-2 rounded",onClick:function(){return n(t)}},"\u7de8\u8f2f")),u.a.createElement("td",{className:"border px-4 py-2"},u.a.createElement("button",{className:"bg-red-500 hover:bg-red-700 text-white font-bold py-1 px-2 rounded",onClick:function(){return c(t.id)}},"\u522a\u9664")))}var h=a(25),g=a(55);function f(){var e=Object(m.b)(),t=Object(d.b)(),a=Object(d.c)((function(e){return e.productsState.products})),n=Object(i.useState)(!0),f=Object(s.a)(n,2),E=f[0],y=f[1],x=Object(i.useState)(!1),N=Object(s.a)(x,2),v=N[0],j=N[1],O=Object(i.useState)({}),w=Object(s.a)(O,2),P=w[0],k=w[1],C=Object(i.useState)(1),U=Object(s.a)(C,2),F=U[0],_=U[1],S=Object(i.useState)(null),T=Object(s.a)(S,2),D=T[0],J=T[1];function A(e){return R.apply(this,arguments)}function R(){return(R=Object(o.a)(c.a.mark((function e(a){var n,r,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://vue-course-api.hexschool.io/api/jay/products?page=".concat(a),e.next=3,fetch(n);case 3:return r=e.sent,e.next=6,r.json();case 6:(l=e.sent).success&&(t({type:"UPDATE_PRODUCT",product:l.products}),y(!1),J(l.pagination.total_pages));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e,t,a){return q.apply(this,arguments)}function q(){return(q=Object(o.a)(c.a.mark((function t(a,n,r){var o,s,i,u,m;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=n?"https://vue-course-api.hexschool.io/api/jay/admin/product/".concat(n):"https://vue-course-api.hexschool.io/api/jay/admin/product",t.next=3,fetch(o,{method:r,body:("PUT"===r||"POST"===r)&&JSON.stringify({data:Object(l.a)({},a)}),credentials:"include",headers:{"content-type":("PUT"===r||"POST"===r)&&"application/json"}});case 3:return s=t.sent,t.next=6,s.json();case 6:i=t.sent,u=i.success,m=i.message,u?(A(),m&&e.success(m)):m&&e.error(m);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function z(e,t){var a=e.target.checked;L(Object(l.a)(Object(l.a)({},t),{},{is_enabled:a?1:0}),t.id,"PUT")}function B(e){k(e),v||j(!0)}function G(e){L(null,e,"DELETE")}return Object(i.useEffect)((function(){A(F)}),[F]),E?u.a.createElement(h.a,null):u.a.createElement("div",{className:"container"},u.a.createElement("h2",{className:"text-2xl"},"Products"),u.a.createElement(p,{open:v,setOpen:j,product:P,handleChange:function(e){var t=e.target,a=t.name,n=t.value,c=t.checked;"is_enabled"===a&&(n=c?1:0),k((function(e){return Object(l.a)(Object(l.a)({},e),{},Object(r.a)({},a,n))}))},updateProduct:function(){L(P,P.id,"PUT"),j(!1)},addProduct:function(){L(P,null,"POST"),k({}),j(!1)},handleCancel:function(){k({}),j(!1)},setProduct:k,alert:e}),u.a.createElement("table",{className:"w-full table-auto"},u.a.createElement("thead",null,u.a.createElement("tr",null,u.a.createElement("th",{className:"border px-4 py-2"},"\u7522\u54c1"),u.a.createElement("th",{className:"border px-4 py-2"},"\u985e\u5225"),u.a.createElement("th",{className:"border px-4 py-2"},"\u55ae\u4f4d"),u.a.createElement("th",{className:"border px-4 py-2"},"\u539f\u50f9"),u.a.createElement("th",{className:"border px-4 py-2"},"\u7279\u50f9"),u.a.createElement("th",{className:"border px-4 py-2"},"\u555f\u7528"),u.a.createElement("th",{className:"border px-4 py-2"},"\u7de8\u8f2f"),u.a.createElement("th",{className:"border px-4 py-2"},"\u522a\u9664"))),u.a.createElement("tbody",null,a&&a.map((function(e,t){return u.a.createElement(b,{product:e,key:t,updateEnabled:z,openUpdateProduct:B,deleteProduct:G})})))),u.a.createElement(g.a,{dePage:F,setDePage:_,num:D}))}}}]);
//# sourceMappingURL=8.dd6803aa.chunk.js.map