(this["webpackJsonpshop-react"]=this["webpackJsonpshop-react"]||[]).push([[3],{49:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(10),c=n(0),l=n.n(c);function r(e){var t=e.num,n=e.setDePage,r=e.dePage,u=Object(c.useState)([]),o=Object(a.a)(u,2),i=o[0],s=o[1];Object(c.useEffect)((function(){!function(e){var t=[];if(e>2){for(var n=1;n<e+1;n++)t.push(n);s(t)}}(t)}),[t]);return l.a.createElement("ul",{className:"max-w-sm inline-flex"},1!==r&&l.a.createElement("li",null,l.a.createElement("button",{className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-l",onClick:function(){return n(r-1)}},"Pre")," "),i.length>1&&i.map((function(e,t){return l.a.createElement("li",{key:t},l.a.createElement("button",{className:r===e?"bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-l":"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-l",onClick:function(){return n(e)}},e))})),r!==t&&l.a.createElement("li",null," ",l.a.createElement("button",{className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-r",onClick:function(){return n(r+1)}},"Next")))}},50:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new Date;n.setTime(1e3*e);var a=n.getFullYear(),l=c(n.getMonth()+1),r=c(n.getDate()),u=c(n.getHours()),o=c(n.getMinutes());return t?"".concat(a,"-").concat(l,"-").concat(r,"- ").concat(u,": ").concat(o):"".concat(a,"-").concat(l,"-").concat(r)};function c(e){return e<10&&(e="0".concat(e)),e}},59:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return E}));var a=n(12),c=n.n(a),l=n(21),r=n(13),u=n(18),o=n(10),i=n(0),s=n.n(i),d=n(19),p=n(50);function m(e){var t=e.open,n=e.setOpen,a=e.coupon,c=e.handleChange,l=e.updateCoupon,r=e.addCoupon,u=e.handleCancel;return s.a.createElement(s.a.Fragment,null,s.a.createElement("button",{onClick:function(){return n(!t)}},"Add Coupon"),t&&s.a.createElement("ul",null,s.a.createElement("label",{htmlFor:"title"},"\u512a\u60e0\u5377\u540d\u7a31:"),s.a.createElement("input",{id:"title",value:a.title||"",name:"title",onChange:c}),s.a.createElement("label",{htmlFor:"code"},"\u4ee3\u78bc:"),s.a.createElement("input",{id:"code",value:a.code||"",name:"code",onChange:c}),s.a.createElement("label",{htmlFor:"percent"},"\u6298\u6263"),s.a.createElement("input",{id:"percent",value:a.percent||"",name:"percent",onChange:c}),s.a.createElement("label",{htmlFor:"due_date"},"\u4f7f\u7528\u671f\u9650:"),s.a.createElement("input",{id:"due_date",type:"date",value:Object(p.a)(a.due_date)||"",name:"due_date",onChange:c}),s.a.createElement("label",{htmlFor:"is_enable"},"\u662f\u5426\u555f\u7528:"),s.a.createElement("input",{id:"is_enable",type:"checkbox",checked:1===a.is_enabled||"",name:"is_enabled",onChange:c}),a.hasOwnProperty("id")?s.a.createElement("button",{onClick:l},"Update"):s.a.createElement("button",{onClick:r},"add"),s.a.createElement("button",{onClick:u},"Cancel")))}function b(e){var t=e.coupon,n=e.updateIsenable,a=e.openUpdateCoupon,c=e.updateDate;return s.a.createElement("tr",null,s.a.createElement("td",null,t.title),s.a.createElement("td",null,t.code),s.a.createElement("td",null,t.percent/100," \u6298"),s.a.createElement("td",null,Object(p.a)(t.due_date)),s.a.createElement("td",null,s.a.createElement("input",{type:"checkbox",onChange:function(e){return n(e,t)},checked:1===t.is_enabled})),s.a.createElement("td",null,s.a.createElement("button",{onClick:function(){return a(t)}},"\u7de8\u8f2f")),s.a.createElement("td",null," ",s.a.createElement("button",{onClick:function(){c(null,t.id,"DELETE")}},"\u522a\u9664")))}var h=n(20),f=n(49);function E(){var e=Object(d.b)(),t=Object(i.useState)(null),n=Object(o.a)(t,2),a=n[0],p=n[1],E=Object(i.useState)({}),g=Object(o.a)(E,2),O=g[0],j=g[1],y=Object(i.useState)(!0),v=Object(o.a)(y,2),C=v[0],x=v[1],k=Object(i.useState)(!1),_=Object(o.a)(k,2),P=_[0],S=_[1],w=Object(i.useState)(1),N=Object(o.a)(w,2),T=N[0],D=N[1],F=Object(i.useState)(null),U=Object(o.a)(F,2),J=U[0],L=U[1];function A(e){return I.apply(this,arguments)}function I(){return(I=Object(u.a)(c.a.mark((function e(t){var n,a,l,r,u,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://vue-course-api.hexschool.io/api/jay/admin/coupons?page=".concat(t),e.next=3,fetch(n,{credentials:"include"});case 3:return a=e.sent,e.next=6,a.json();case 6:l=e.sent,r=l.success,u=l.pagination,o=l.coupons,r&&(p(o),L(u.total_pages),x(!1));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e,t,n){return H.apply(this,arguments)}function H(){return(H=Object(u.a)(c.a.mark((function t(n,a,l){var u,o,i,s,d;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=a?"https://vue-course-api.hexschool.io/api/jay/admin/coupon/".concat(a):"https://vue-course-api.hexschool.io/api/jay/admin/coupon",t.next=3,fetch(u,{method:l,body:("PUT"===l||"POST"===l)&&JSON.stringify({data:Object(r.a)({},n)}),credentials:"include",headers:{"content-type":("PUT"===l||"POST"===l)&&"application/json"}});case 3:return o=t.sent,t.next=6,o.json();case 6:i=t.sent,s=i.success,d=i.message,s?(A(),d&&e.success(d)):d&&e.error(d);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Y(e,t){M(Object(r.a)(Object(r.a)({},t),{},{is_enabled:e.target.checked?1:0}),t.id,"PUT")}function q(e){j(e),S(!0)}Object(i.useEffect)((function(){A(T)}),[T]);return C?s.a.createElement(h.a,null):s.a.createElement("div",{className:"CouponList"},s.a.createElement("h2",null,"Coupon"),s.a.createElement(m,{open:P,setOpen:S,coupon:O,handleChange:function(e){var t=e.target,n=t.name,a=t.value,c=t.checked,u=t.valueAsNumber;"due_date"===n?a=u/1e3:"is_enabled"===n&&(a=c?1:0),j((function(e){return Object(r.a)(Object(r.a)({},e),{},Object(l.a)({},n,a))}))},updateCoupon:function(){M(O,O.id,"PUT"),S(!1)},addCoupon:function(){M(O,null,"POST"),j({}),S(!1)},handleCancel:function(){j({}),S(!1)}}),s.a.createElement("table",{className:"CouponList-table"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"\u512a\u60e0\u5377"),s.a.createElement("th",null,"\u4ee3\u78bc"),s.a.createElement("th",null,"\u6298\u6263"),s.a.createElement("th",null,"\u4f7f\u7528\u671f\u9650"),s.a.createElement("th",null,"\u4f7f\u7528"),s.a.createElement("th",null,"\u7de8\u8f2f"),s.a.createElement("th",null,"\u522a\u9664"))),s.a.createElement("tbody",null,a&&a.map((function(e,t){return s.a.createElement(b,{key:t,coupon:e,updateIsenable:Y,openUpdateCoupon:q,updateDate:M})})))),s.a.createElement(f.a,{dePage:T,setDePage:D,num:J}))}}}]);
//# sourceMappingURL=3.2058840d.chunk.js.map