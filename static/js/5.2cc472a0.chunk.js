(this["webpackJsonpshop-react"]=this["webpackJsonpshop-react"]||[]).push([[5],{50:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new Date;n.setTime(1e3*e);var a=n.getFullYear(),l=c(n.getMonth()+1),u=c(n.getDate()),o=c(n.getHours()),r=c(n.getMinutes());return t?"".concat(a,"-").concat(l,"-").concat(u,"- ").concat(o,": ").concat(r):"".concat(a,"-").concat(l,"-").concat(u)};function c(e){return e<10&&(e="0".concat(e)),e}},60:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return f}));var a=n(21),c=n(13),l=n(11),u=n.n(l),o=n(18),r=n(12),i=n(0),p=n.n(i),s=n(20),d=n(50);function m(e){var t=e.open,n=e.setOpen,a=e.coupon,c=e.handleChange,l=e.updateCoupon,u=e.addCoupon,o=e.handleCancel;return p.a.createElement(p.a.Fragment,null,p.a.createElement("button",{onClick:function(){return n(!t)}},"Add Coupon"),t&&p.a.createElement("ul",null,p.a.createElement("label",{htmlFor:"title"},"\u512a\u60e0\u5377\u540d\u7a31:"),p.a.createElement("input",{id:"title",value:a.title||"",name:"title",onChange:c}),p.a.createElement("label",{htmlFor:"code"},"\u4ee3\u78bc:"),p.a.createElement("input",{id:"code",value:a.code||"",name:"code",onChange:c}),p.a.createElement("label",{htmlFor:"percent"},"\u6298\u6263"),p.a.createElement("input",{id:"percent",value:a.percent||"",name:"percent",onChange:c}),p.a.createElement("label",{htmlFor:"due_date"},"\u4f7f\u7528\u671f\u9650:"),p.a.createElement("input",{id:"due_date",type:"date",value:Object(d.a)(a.due_date)||"",name:"due_date",onChange:c}),p.a.createElement("label",{htmlFor:"is_enable"},"\u662f\u5426\u555f\u7528:"),p.a.createElement("input",{id:"is_enable",type:"checkbox",checked:1===a.is_enabled||"",name:"is_enabled",onChange:c}),a.hasOwnProperty("id")?p.a.createElement("button",{onClick:l},"Update"):p.a.createElement("button",{onClick:u},"add"),p.a.createElement("button",{onClick:o},"Cancel")))}function h(e){var t=e.coupon,n=e.updateIsenable,a=e.openUpdateCoupon,c=e.updateDate;return p.a.createElement("li",{style:{display:"flex",width:"50vw",justifyContent:"space-around",alignItems:"center"}},p.a.createElement("p",null,t.title),p.a.createElement("p",null,t.code),p.a.createElement("p",null,t.percent/100," \u6298"),p.a.createElement("p",null,Object(d.a)(t.due_date)),p.a.createElement("input",{type:"checkbox",onChange:function(e){return n(e,t)},checked:1===t.is_enabled}),p.a.createElement("button",{onClick:function(){return a(t)}},"\u7de8\u8f2f"),p.a.createElement("button",{onClick:function(){c(null,t.id,"DELETE")}},"\u522a\u9664"))}var b=n(19);function f(){var e=Object(s.b)(),t=Object(i.useState)(null),n=Object(r.a)(t,2),l=n[0],d=n[1],f=Object(i.useState)({}),E=Object(r.a)(f,2),v=E[0],j=E[1],C=Object(i.useState)(!0),O=Object(r.a)(C,2),g=O[0],y=O[1],k=Object(i.useState)(!1),x=Object(r.a)(k,2),_=x[0],w=x[1],T=function(){var e=Object(o.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://vue-course-api.hexschool.io/api/jay/admin/coupons",e.next=3,fetch("https://vue-course-api.hexschool.io/api/jay/admin/coupons",{credentials:"include"});case 3:return t=e.sent,e.next=6,t.json();case 6:(n=e.sent).success&&(d(n.coupons),y(!1));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){T()}),[]);var P=function(){var t=Object(o.a)(u.a.mark((function t(n,a,l){var o,r,i,p,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=a?"https://vue-course-api.hexschool.io/api/jay/admin/coupon/".concat(a):"https://vue-course-api.hexschool.io/api/jay/admin/coupon",t.next=3,fetch(o,{method:l,body:("PUT"===l||"POST"===l)&&JSON.stringify({data:Object(c.a)({},n)}),credentials:"include",headers:{"content-type":("PUT"===l||"POST"===l)&&"application/json"}});case 3:return r=t.sent,t.next=6,r.json();case 6:i=t.sent,p=i.success,s=i.message,p?(T(),s&&e.success(s)):s&&e.error(s);case 9:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}(),S=function(e,t){var n=Object(c.a)(Object(c.a)({},t),{},{is_enabled:e.target.checked?1:0});P(n,t.id,"PUT")},F=function(e){j(e),w(!0)};return g?p.a.createElement(b.a,null):p.a.createElement("div",null,p.a.createElement("h2",null,"Coupon"),p.a.createElement(m,{open:_,setOpen:w,coupon:v,handleChange:function(e){var t=e.target,n=t.name,l=t.value,u=t.checked,o=t.valueAsNumber;"due_date"===n?l=o/1e3:"is_enabled"===n&&(l=u?1:0),console.log(n,l),j((function(e){return Object(c.a)(Object(c.a)({},e),{},Object(a.a)({},n,l))}))},updateCoupon:function(){P(v,v.id,"PUT"),w(!1)},addCoupon:function(){P(v,null,"POST"),j({}),w(!1)},handleCancel:function(){j({}),w(!1)}}),p.a.createElement("ul",null,p.a.createElement("li",{style:{display:"flex",width:"50vw",justifyContent:"space-around"}},p.a.createElement("p",null,"\u512a\u60e0\u5377"),p.a.createElement("p",null,"\u4ee3\u78bc"),p.a.createElement("p",null,"\u6298\u6263"),p.a.createElement("p",null,"\u4f7f\u7528\u671f\u9650"),p.a.createElement("p",null,"\u4f7f\u7528"),p.a.createElement("p",null,"\u7de8\u8f2f"),p.a.createElement("p",null,"\u522a\u9664")),l&&l.map((function(e,t){return p.a.createElement(h,{key:t,coupon:e,updateIsenable:S,openUpdateCoupon:F,updateDate:P})}))))}}}]);
//# sourceMappingURL=5.2cc472a0.chunk.js.map