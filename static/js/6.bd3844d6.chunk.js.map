{"version":3,"sources":["js/setTime.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","components/OrderList/EditOrderList.js","components/OrderList/Order.js","components/OrderList/OrderList.js"],"names":["changeToDate","number","isTrue","dateTime","Date","setTime","year","getFullYear","month","addZero","getMonth","day","getDate","hour","getHours","min","getMinutes","_toConsumableArray","arr","Array","isArray","arrayLikeToArray","iter","Symbol","iterator","Object","from","unsupportedIterableToArray","TypeError","EditOrderList","order","handleChange","editOrderList","handleCancel","style","display","flexDirection","width","htmlFor","name","id","value","user","onChange","tel","address","email","type","checked","is_paid","keys","products","map","key","justifyContent","product","title","qty","unit","total","final_total","onClick","Order","showDetail","openDetail","openEditOrder","includes","num","create_at","paid_date","OrderList","alert","useAlert","useState","orders","setOrders","setOrder","show","setShow","setOpenDetail","loading","setLoading","setId","fetchData","a","fetch","credentials","response","json","data","success","useEffect","length","newid","filter","item","Url","method","body","JSON","stringify","headers","result","message","Loading","event","target","preOrder","i"],"mappings":"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","file":"static/js/6.bd3844d6.chunk.js","sourcesContent":["export const changeToDate = (number, isTrue = false) => {\r\n  let dateTime = new Date();\r\n  dateTime.setTime(number * 1000);\r\n  const year = dateTime.getFullYear();\r\n  const month = addZero(dateTime.getMonth() + 1);\r\n  const day = addZero(dateTime.getDate());\r\n  const hour = addZero(dateTime.getHours());\r\n  const min = addZero(dateTime.getMinutes());\r\n\r\n  let date;\r\n  if (isTrue) {\r\n    date = `${year}-${month}-${day}- ${hour}: ${min}`;\r\n  } else {\r\n    date = `${year}-${month}-${day}`;\r\n  }\r\n  return date;\r\n}\r\n\r\nfunction addZero(number) {\r\n  if (number < 10) {\r\n    number = `0${number}`\r\n  }\r\n  return number;\r\n}","import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import React from 'react'\r\n\r\nexport default function EditOrderList({ order, handleChange, editOrderList, handleCancel }) {\r\n  return (\r\n    <div>\r\n      <h3>客戶資料</h3>\r\n      <div style={{ display: 'flex', flexDirection: 'column', width: '30vw' }}>\r\n        <label htmlFor='name'>姓名:</label>\r\n        <input\r\n          name='name'\r\n          id='name'\r\n          value={order.user.name}\r\n          onChange={handleChange} />\r\n        <label htmlFor='tel'>電話:</label>\r\n        <input\r\n          name='tel'\r\n          id='tel'\r\n          value={order.user.tel}\r\n          onChange={handleChange} />\r\n        <label htmlFor='address'>地址:</label>\r\n        <input\r\n          name='address'\r\n          id='address'\r\n          value={order.user.address}\r\n          onChange={handleChange} />\r\n        <label htmlFor='email'>E-mail:</label>\r\n        <input\r\n          name='email'\r\n          id='email'\r\n          value={order.user.email}\r\n          onChange={handleChange} />\r\n        <label>已付款\r\n              <input\r\n            type='checkbox'\r\n            name='is_paid'\r\n            checked={order.is_paid}\r\n            onChange={handleChange} />\r\n        </label>\r\n\r\n      </div>\r\n      <h3>商品:</h3>\r\n      {\r\n        Object.keys(order.products).map(key => {\r\n          return (\r\n            <div key={key} style={{ display: 'flex', width: '50vw', justifyContent: 'space-around' }}>\r\n              <p>{order.products[key].product.title}</p>\r\n              <p>{order.products[key].qty} {order.products[key].product.unit}</p>\r\n              <p>{order.products[key].total} 元</p>\r\n              <p>{order.products[key].final_total} 元</p>\r\n            </div>)\r\n        })\r\n      }\r\n      <button onClick={editOrderList}>Update</button>\r\n      <button onClick={handleCancel}>Cancel</button>\r\n    </div>\r\n  )\r\n}","import React from 'react'\r\nimport { changeToDate } from '../../js/setTime';\r\n\r\nexport default function Order({ order, showDetail, openDetail, id, openEditOrder }) {\r\n\r\n  return (\r\n    <div>\r\n      <p onClick={() => showDetail(order.id)}>訂單編號: {order.id}</p>\r\n      {\r\n        (openDetail && id.includes(order.id)) && (\r\n          <>\r\n            <ul>\r\n              <li style={{ display: 'flex', width: '50vw', justifyContent: 'space-around' }}>\r\n                <p>商品</p>\r\n                <p>數量</p>\r\n                <p>價格</p>\r\n                <p>特價</p>\r\n              </li>\r\n              {Object.keys(order.products).map((key) => (<li key={key} style={{ display: 'flex', width: '50vw', justifyContent: 'space-around' }}>\r\n                <p>{order.products[key].product.title}</p>\r\n                <p>{order.products[key].qty} {order.products[key].product.unit}</p>\r\n                <p>{order.products[key].total} 元</p>\r\n                <p>{order.products[key].final_total} 元</p>\r\n              </li>\r\n              ))}\r\n              <li style={{ display: 'flex', width: '50vw', justifyContent: 'space-around' }}>總共{order.num} 件 ，總金額為 {order.total} 元</li>\r\n            </ul>\r\n            <ul>\r\n              <li>名字: {order.user.name}</li>\r\n              <li>地址: {order.user.address}</li>\r\n              <li>電話: {order.user.tel}</li>\r\n              <li>E-mail: {order.user.email}</li>\r\n              <li>金額: {order.total}元</li>\r\n            </ul>\r\n          </>\r\n        )\r\n      }\r\n      <p>下單時間:{changeToDate(order.create_at, true)} </p>\r\n      {\r\n        order.paid_date && <p>結帳時間: {changeToDate(order.paid_date, true)}</p>\r\n      }\r\n      <p>{order.is_paid ? '已結帳' : '還沒結帳'}</p>\r\n      <button onClick={() => openEditOrder(order)}>Edit</button>\r\n    </div>\r\n  )\r\n}","import React, { useState, useEffect } from 'react';\r\nimport { useAlert } from 'react-alert';\r\n\r\nimport EditOrderList from './EditOrderList';\r\nimport Order from './Order';\r\nimport Loading from '../Loading/Loading'\r\n\r\n\r\nexport default function OrderList() {\r\n  const alert = useAlert();\r\n\r\n  const [orders, setOrders] = useState(null);\r\n  const [order, setOrder] = useState(null);\r\n  const [show, setShow] = useState(false);\r\n  const [openDetail, setOpenDetail] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n  const [id, setId] = useState([]);\r\n\r\n  const fetchData = async () => {\r\n    const Url = 'https://vue-course-api.hexschool.io/api/jay/admin/orders';\r\n    const response = await fetch(Url, {\r\n      credentials: 'include',\r\n    });\r\n    const data = await response.json();\r\n    if (data.success) {\r\n      setOrders(data.orders);\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  const showDetail = num => {\r\n    if (!openDetail && id.length === 0) {\r\n      setOpenDetail(!openDetail);\r\n      setId([num])\r\n    } else if (openDetail && id && !id.includes(num)) {\r\n      const newid = [...id, num];\r\n      setId(newid)\r\n    } else if (openDetail && id.length > 1 && id.includes(num)) {\r\n      const newid = id.filter(item => item !== num)\r\n      setId(newid)\r\n    } else {\r\n      setOpenDetail(false);\r\n      setId([]);\r\n    }\r\n  }\r\n\r\n  const handleChange = event => {\r\n    const { name, value, checked } = event.target;\r\n    setOrder(preOrder => {\r\n      if (name === 'email' || name === 'address' || name === 'name' || name === 'tel') {\r\n        return {\r\n          ...preOrder,\r\n          user: {\r\n            ...preOrder.user,\r\n            [name]: value\r\n          }\r\n        }\r\n      } else if (name === 'is_paid') {\r\n        return {\r\n          ...preOrder,\r\n          [name]: checked\r\n        }\r\n      }\r\n      else {\r\n        return {\r\n          ...preOrder,\r\n          [name]: value\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  const openEditOrder = item => {\r\n    setShow(true);\r\n    setOrder(item);\r\n  }\r\n\r\n  const editOrderList = async () => {\r\n    const Url = `https://vue-course-api.hexschool.io/api/jay/admin/order/${order.id}`;\r\n    setShow(false);\r\n    setLoading(true);\r\n    const data = { ...order };\r\n    const response = await fetch(Url, {\r\n      method: 'PUT',\r\n      body: JSON.stringify({ data: { ...data } }),\r\n      credentials: 'include',\r\n      headers: { 'content-type': 'application/json' },\r\n    });\r\n    const result = await response.json();\r\n    const { success, message } = result;\r\n    if (success) {\r\n      fetchData();\r\n      alert.success(message);\r\n    }\r\n  }\r\n\r\n  const handleCancel = () => {\r\n    setShow(false);\r\n    setOrder(null);\r\n  }\r\n\r\n  if (loading) {\r\n    return <Loading />\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h2>OrderList</h2>\r\n      {\r\n        show && <EditOrderList order={order} handleChange={handleChange} editOrderList={editOrderList} handleCancel={handleCancel} />\r\n      }\r\n\r\n      {\r\n        orders.map((order, i) => {\r\n          return <Order key={i} order={order} showDetail={showDetail} openDetail={openDetail} id={id} openEditOrder={openEditOrder} />\r\n        })\r\n      }\r\n    </div>\r\n  )\r\n}"],"sourceRoot":""}