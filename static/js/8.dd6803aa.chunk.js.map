{"version":3,"sources":["components/Pages.js","components/Products/EditProduct.js","components/Products/BackProduct.js","components/Products/Products.js"],"names":["Pages","num","setDePage","dePage","useState","pages","setPages","useEffect","newPages","i","push","setPagesArray","className","length","onClick","map","page","key","EditProduct","open","setOpen","product","handleChange","updateProduct","addProduct","handleCancel","setProduct","alert","inputEl","useRef","a","uploadedFile","current","files","formData","FormData","append","fetch","method","body","credentials","response","json","result","success","message","imageUrl","preProducts","error","div","input","label","category","title","content","description","origin_price","price","unit","is_enabled","htmlFor","id","name","value","onChange","type","placeholder","ref","style","width","height","src","alt","checked","hasOwnProperty","BackProduct","updateEnabled","openUpdateProduct","deleteProduct","e","Products","useAlert","dispatch","useDispatch","products","useSelector","state","productsState","loading","setLoading","fetchProducts","Url","data","pagination","total_pages","updateData","JSON","stringify","headers","item","target","Loading","event","preProduct"],"mappings":"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","file":"static/js/8.dd6803aa.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react'\n\n\nexport default function Pages({ num, setDePage, dePage }) {\n  const [pages, setPages] = useState([]);\n\n  useEffect(() => {\n    setPagesArray(num)\n  }, [num])\n\n  function setPagesArray(num) {\n    const newPages = []\n    if (num > 2) {\n      for (let i = 1; i < (num + 1); i++) {\n        newPages.push(i);\n      }\n      setPages(newPages);\n    }\n  }\n\n  const active = 'bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-l';\n  const normal = 'bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-l'\n  return (\n    <ul className='max-w-sm inline-flex mt-2'>\n      {\n        (pages.length > 1 && dePage !== 1) && <li><button className='bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-l' onClick={() => setDePage(dePage - 1)}>Pre</button> </li>\n      }\n      {\n        pages.length > 1 && (pages.map((page, i) => (\n          <li key={i}>\n            <button className={dePage === page ? active : normal} onClick={() => setDePage(page)}>\n              {page}\n            </button>\n          </li>\n        )))\n      }\n      {\n        (pages.length > 1 && dePage !== num) && <li> <button className='bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-r' onClick={() => setDePage(dePage + 1)}>Next</button></li>\n      }\n\n    </ul>\n  )\n} ","import React, { useRef } from 'react'\r\n\r\n\r\nexport default function EditProduct({ open, setOpen, product, handleChange, updateProduct, addProduct, handleCancel, setProduct, alert }) {\r\n  const inputEl = useRef(null);\r\n\r\n  async function uploadFild() {\r\n    const uploadedFile = inputEl.current.files[0];\r\n    const formData = new FormData();\r\n    formData.append('file-to-upload', uploadedFile);\r\n    const Url = 'https://vue-course-api.hexschool.io/api/jay/admin/upload';\r\n    const response = await fetch(Url, {\r\n      method: 'POST',\r\n      body: formData,\r\n      credentials: 'include',\r\n    })\r\n    const result = await response.json();\r\n    const { success, message, imageUrl } = result;\r\n    if (success) {\r\n      setProduct(preProducts => {\r\n        return {\r\n          ...preProducts,\r\n          imageUrl\r\n        }\r\n      });\r\n      alert.success('上傳成功');\r\n    } else {\r\n      if (message) {\r\n        alert.error(message);\r\n      } else {\r\n        alert.error('上傳失敗, 檔案過大');\r\n      }\r\n    }\r\n  }\r\n  const style = {\r\n    div: 'w-full md:w-1/2 lg:w-1/3  px-3 mt-3 mb-6 md:mb-0',\r\n    label: 'block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2',\r\n    input: 'appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500\" id=\"grid-last-name',\r\n  };\r\n\r\n\r\n  const { div, input, label } = style;\r\n  const { category, title, content, description, imageUrl, origin_price, price, unit, is_enabled } = product;\r\n  return (\r\n    <>\r\n      <button\r\n        className='my-2 bg-teal-500 hover:bg-teal-700 text-white font-bold py-1 px-2 rounded'\r\n        onClick={() => { setOpen(!open) }}>建立新商品</button>\r\n      {\r\n        open ? (\r\n          <div className='w-full'>\r\n            <div className='flex flex-wrap mb-6'>\r\n              <section className={div}>\r\n                <label className={label} htmlFor='category'>類別:</label>\r\n                <input\r\n                  className={input}\r\n                  id='category'\r\n                  name='category'\r\n                  value={category || ''}\r\n                  onChange={handleChange} />\r\n              </section>\r\n              <section className={div}>\r\n                <label className={label} htmlFor='title'>商品:</label>\r\n                <input\r\n                  className={input}\r\n                  id='title'\r\n                  name='title'\r\n                  value={title || ''}\r\n                  onChange={handleChange} />\r\n              </section>\r\n              <section className={div}>\r\n                <label htmlFor='content' className={label}>內容:</label>\r\n                <input\r\n                  className={input}\r\n                  id='content'\r\n                  name='content'\r\n                  value={content || ''}\r\n                  onChange={handleChange} />\r\n              </section>\r\n              <section className={div}>\r\n                <label htmlFor='description' className={label}>描述:</label>\r\n                <input\r\n                  className={input}\r\n                  id='description'\r\n                  name='description'\r\n                  value={description || ''}\r\n                  onChange={handleChange} />\r\n              </section>\r\n              <section className={div}>\r\n                <label htmlFor=\"image\" className={label}>輸入圖片網址</label>\r\n                <input\r\n                  type=\"text\"\r\n                  className={input}\r\n                  onChange={handleChange}\r\n                  value={imageUrl || ''}\r\n                  id=\"image\"\r\n                  name='imageUrl'\r\n                  placeholder=\"請輸入圖片連結\" />\r\n              </section>\r\n              <section className={div}>\r\n                <label htmlFor=\"customFile\" className={label}>或 上傳圖片:</label>\r\n                <input\r\n                  type=\"file\"\r\n                  id=\"customFile\"\r\n                  className={input}\r\n                  ref={inputEl}\r\n                  onChange={uploadFild} />\r\n                {\r\n                  product.imageUrl && <img style={{ width: '200px', height: '200px' }} src={product.imageUrl} alt='proPic' />\r\n                }\r\n              </section>\r\n              <section className={div}>\r\n                <label htmlFor='origin_price' className={label}>原價:</label>\r\n                <input\r\n                  className={input}\r\n                  id='origin_price'\r\n                  name='origin_price'\r\n                  value={origin_price || ''}\r\n                  onChange={handleChange} />\r\n              </section>\r\n              <section className={div}>\r\n                <label htmlFor='price' className={label}>特價:</label>\r\n                <input\r\n                  className={input}\r\n                  id='price'\r\n                  name='price'\r\n                  value={price || ''}\r\n                  onChange={handleChange} />\r\n              </section>\r\n              <section className={div}>\r\n                <label htmlFor='unit' className={label}>單位:</label>\r\n                <input\r\n                  className={input}\r\n                  id='unit'\r\n                  name='unit'\r\n                  value={unit || ''}\r\n                  onChange={handleChange} />\r\n              </section>\r\n              <section className={div}>\r\n                <label className={label} htmlFor='is_enabled'>啟用:</label>\r\n                <input\r\n                  type='checkbox'\r\n                  checked={(is_enabled === 1 ? true : false) || ''}\r\n                  onChange={handleChange}\r\n                  id='is_enabled'\r\n                  name='is_enabled' />\r\n              </section>\r\n              <div className='w-full md:w-1/2 lg:w-1/3 px-3 flex p-4 justify-end'>\r\n                {\r\n                  !product.hasOwnProperty('id') ? <button className='bg-blue-500 hover:bg-blue-700 text-white font-bold py-1 px-2 rounded' onClick={addProduct}>Add</button> : <button className='bg-blue-500 hover:bg-blue-700 text-white font-bold py-1 px-2 rounded' onClick={updateProduct}>Update</button>\r\n                }\r\n                <button className='bg-red-500 hover:bg-red-700 text-white font-bold py-1 px-2 rounded ml-3' onClick={handleCancel}>取消</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ) : null\r\n      }\r\n    </>\r\n  )\r\n}","import React from 'react'\r\n\r\nexport default function BackProduct({ product, updateEnabled, openUpdateProduct, deleteProduct }) {\r\n  return (\r\n    <tr className='text-right'>\r\n      <td className='border  px-4 py-2'>{product.title}</td>\r\n      <td className='border  px-4 py-2'>{product.category}</td>\r\n      <td className='border  px-4 py-2'>{product.unit}</td>\r\n      <td className='border  px-4 py-2'>{product.origin_price}元</td>\r\n      <td className='border  px-4 py-2'>{product.price}元</td>\r\n      <td className='border  px-4 py-2'><input\r\n        type=\"checkbox\"\r\n        onChange={(e) => updateEnabled(e, product)}\r\n        checked={product.is_enabled === 1 ? true : false}\r\n      /></td>\r\n      <td className='border px-4 py-2'>\r\n        <button\r\n          className='bg-teal-500 hover:bg-teal-700 text-white font-bold py-1 px-2 rounded'\r\n          onClick={() => openUpdateProduct(product)}>編輯</button></td>\r\n      <td className='border px-4 py-2'>\r\n        <button\r\n          className='bg-red-500 hover:bg-red-700 text-white font-bold py-1 px-2 rounded'\r\n          onClick={() => deleteProduct(product.id)}>刪除</button></td>\r\n    </tr>\r\n  )\r\n}","import React, { useEffect, useState } from 'react';\r\nimport { useAlert } from 'react-alert';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nimport EditProduct from './EditProduct';\r\nimport BackProduct from './BackProduct';\r\nimport Loading from '../Loading/Loading';\r\nimport Pages from '../Pages';\r\n\r\nexport default function Products() {\r\n  const alert = useAlert();\r\n  const dispatch = useDispatch();\r\n  const products = useSelector(state => state.productsState.products)\r\n\r\n  const [loading, setLoading] = useState(true);\r\n  const [open, setOpen] = useState(false);\r\n  const [product, setProduct] = useState({});\r\n  const [dePage, setDePage] = useState(1);\r\n  const [pages, setPages] = useState(null);\r\n\r\n  useEffect(() => {\r\n    fetchProducts(dePage);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [dePage]);\r\n\r\n  async function fetchProducts(page) {\r\n    const Url = `https://vue-course-api.hexschool.io/api/jay/products?page=${page}`;\r\n    const response = await fetch(Url);\r\n    const data = await response.json();\r\n    if (data.success) {\r\n      dispatch({ type: 'UPDATE_PRODUCT', product: data.products })\r\n      setLoading(false);\r\n      setPages(data.pagination.total_pages);\r\n    }\r\n\r\n  }\r\n\r\n  async function updateData(data, id, type) {\r\n    let Url;\r\n    if (id) {\r\n      Url = `https://vue-course-api.hexschool.io/api/jay/admin/product/${id}`;\r\n    } else {\r\n      Url = `https://vue-course-api.hexschool.io/api/jay/admin/product`;\r\n    }\r\n\r\n    const response = await fetch(Url, {\r\n      method: type,\r\n      body: (type === 'PUT' || type === 'POST') && JSON.stringify({ data: { ...data } }),\r\n      credentials: 'include',\r\n      headers: { 'content-type': (type === 'PUT' || type === 'POST') && 'application/json' },\r\n    });\r\n    const result = await response.json();\r\n    const { success, message } = result;\r\n    if (success) {\r\n      fetchProducts();\r\n      if (message) {\r\n        alert.success(message);\r\n      }\r\n    } else {\r\n      if (message) {\r\n        alert.error(message)\r\n      }\r\n    }\r\n  }\r\n\r\n  function updateEnabled(e, item) {\r\n    const { checked } = e.target;\r\n    const newproduct = { ...item, is_enabled: checked ? 1 : 0 };\r\n    updateData(newproduct, item.id, 'PUT');\r\n  }\r\n\r\n  function openUpdateProduct(item) {\r\n    setProduct(item);\r\n    if (!open) {\r\n      setOpen(true);\r\n    }\r\n  }\r\n\r\n  function handleChange(event) {\r\n    let { name, value, checked } = event.target;\r\n    if (name === 'is_enabled') {\r\n      value = checked ? 1 : 0;\r\n    }\r\n    setProduct(preProduct => {\r\n      return {\r\n        ...preProduct,\r\n        [name]: value\r\n      }\r\n    })\r\n  }\r\n\r\n  function addProduct() {\r\n    updateData(product, null, 'POST');\r\n    setProduct({});\r\n    setOpen(false);\r\n  }\r\n\r\n  function updateProduct() {\r\n    updateData(product, product.id, 'PUT');\r\n    setOpen(false);\r\n  }\r\n\r\n  function deleteProduct(id) {\r\n    updateData(null, id, 'DELETE');\r\n  }\r\n\r\n  function handleCancel() {\r\n    setProduct({});\r\n    setOpen(false);\r\n  }\r\n\r\n  if (loading) {\r\n    return <Loading />\r\n  }\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <h2 className='text-2xl'>Products</h2>\r\n      <EditProduct\r\n        open={open}\r\n        setOpen={setOpen}\r\n        product={product}\r\n        handleChange={handleChange}\r\n        updateProduct={updateProduct}\r\n        addProduct={addProduct}\r\n        handleCancel={handleCancel}\r\n        setProduct={setProduct}\r\n        alert={alert}\r\n      />\r\n      <table className=\"w-full table-auto\">\r\n        <thead>\r\n          <tr>\r\n            <th className='border px-4 py-2'>產品</th>\r\n            <th className='border px-4 py-2'>類別</th>\r\n            <th className='border px-4 py-2'>單位</th>\r\n            <th className='border px-4 py-2'>原價</th>\r\n            <th className='border px-4 py-2'>特價</th>\r\n            <th className='border px-4 py-2'>啟用</th>\r\n            <th className='border px-4 py-2'>編輯</th>\r\n            <th className='border px-4 py-2'>刪除</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {\r\n            products && products.map((product, i) => {\r\n              return <BackProduct\r\n                product={product}\r\n                key={i}\r\n                updateEnabled={updateEnabled}\r\n                openUpdateProduct={openUpdateProduct}\r\n                deleteProduct={deleteProduct} />\r\n            })\r\n          }\r\n        </tbody>\r\n      </table>\r\n      <Pages dePage={dePage} setDePage={setDePage} num={pages} />\r\n    </div>\r\n\r\n  )\r\n}"],"sourceRoot":""}