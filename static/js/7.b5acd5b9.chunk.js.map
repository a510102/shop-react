{"version":3,"sources":["components/Login.js"],"names":["Login","setAuth","history","useHistory","alert","useAlert","useState","username","password","user","setUser","loading","setLoading","handleChange","event","target","name","value","preUser","a","preventDefault","fetch","method","body","JSON","stringify","credentials","headers","response","json","success","push","show","onSubmit","type","placeholder","onChange","className","onClick"],"mappings":"qRAMe,SAASA,EAAT,GAA6B,IAAZC,EAAW,EAAXA,QACxBC,EAAUC,cACVC,EAAQC,cAF2B,EAIjBC,mBAAS,CAC/BC,SAAU,GACVC,SAAU,KAN6B,mBAIlCC,EAJkC,KAI5BC,EAJ4B,OASXJ,oBAAS,GATE,mBASlCK,EATkC,KASzBC,EATyB,KAYzC,SAASC,EAAaC,GAAQ,IAAD,EACHA,EAAMC,OAAtBC,EADmB,EACnBA,KAAMC,EADa,EACbA,MACdP,GAAQ,SAAAQ,GACN,OAAO,2BACFA,GADL,kBAEGF,EAAOC,OAjB2B,4CAsBzC,WAA2BH,GAA3B,mBAAAK,EAAA,yDACEL,EAAMM,iBAEEb,EAAuBE,EAAvBF,SAAUC,EAAaC,EAAbD,UACdD,IAAYC,EAJlB,wBAKII,GAAW,GACC,mDANhB,SAO2BS,MADX,mDACsB,CAChCC,OAAQ,OACRC,KAAMC,KAAKC,UAAUhB,GACrBiB,YAAa,UACbC,QAAS,CAAE,eAAgB,sBAXjC,cAOUC,EAPV,iBAayBA,EAASC,OAblC,eAceC,UACTlB,GAAW,GACXX,GAAQ,GACRC,EAAQ6B,KAAK,cAjBnB,yBAmBcxB,GAAYC,EACtBJ,EAAM4B,KAAK,6BACDxB,GAAYD,EACtBH,EAAM4B,KAAK,8BAEX5B,EAAM4B,KAAK,0CAxBf,6CAtByC,sBAmDzC,OAAIrB,EACK,kBAAC,IAAD,MAKP,0BAAMsB,SAzDiC,6CA0DrC,sCACA,0CACE,2BACEC,KAAK,QACLC,YAAY,QACZnB,KAAK,WACLoB,SAAUvB,EACVI,MAAOR,EAAKF,YAEhB,6CACE,2BACE2B,KAAK,mBACLC,YAAY,WACZnB,KAAK,WACLoB,SAAUvB,EACVI,MAAOR,EAAKD,YAEhB,yBAAK6B,UAAU,YACb,4BAAQH,KAAK,UAAb,UACA,4BAAQI,QAAS,WAAQpC,EAAQ6B,KAAK,WAAtC","file":"static/js/7.b5acd5b9.chunk.js","sourcesContent":["import React, { useState } from 'react'\r\nimport { useHistory } from 'react-router-dom';\r\nimport { useAlert } from 'react-alert';\r\nimport Loading from './Loading/Loading';\r\nimport '../styles/Logoin.scss'\r\n\r\nexport default function Login({ setAuth }) {\r\n  const history = useHistory();\r\n  const alert = useAlert();\r\n\r\n  const [user, setUser] = useState({\r\n    username: '',\r\n    password: ''\r\n  });\r\n\r\n  const [loading, setLoading] = useState(false);\r\n\r\n\r\n  function handleChange(event) {\r\n    const { name, value } = event.target;\r\n    setUser(preUser => {\r\n      return {\r\n        ...preUser,\r\n        [name]: value\r\n      }\r\n    });\r\n  }\r\n\r\n  async function handleLogin(event) {\r\n    event.preventDefault();\r\n\r\n    const { username, password } = user;\r\n    if (username && password) {\r\n      setLoading(true);\r\n      const Url = 'https://vue-course-api.hexschool.io/admin/signin';\r\n      const response = await fetch(Url, {\r\n        method: \"POST\",\r\n        body: JSON.stringify(user),\r\n        credentials: 'include',\r\n        headers: { 'content-type': 'application/json' }\r\n      });\r\n      const result = await response.json();\r\n      if (result.success) {\r\n        setLoading(false);\r\n        setAuth(true);\r\n        history.push('/products');\r\n      }\r\n    } else if (!username && password) {\r\n      alert.show('請輸入E-mail');\r\n    } else if (!password && username) {\r\n      alert.show('請輸入Password')\r\n    } else {\r\n      alert.show('請輸入Email 跟Password')\r\n    }\r\n\r\n  }\r\n\r\n  if (loading) {\r\n    return <Loading />\r\n  }\r\n\r\n\r\n  return (\r\n    <form onSubmit={handleLogin}>\r\n      <h2>LogoIn</h2>\r\n      <label> Email :\r\n        <input\r\n          type=\"email\"\r\n          placeholder='email'\r\n          name='username'\r\n          onChange={handleChange}\r\n          value={user.username} />\r\n      </label>\r\n      <label> Password :\r\n        <input\r\n          type=\"current-password\"\r\n          placeholder='password'\r\n          name=\"password\"\r\n          onChange={handleChange}\r\n          value={user.password} />\r\n      </label>\r\n      <div className='form-btn'>\r\n        <button type='submit'>Submit</button>\r\n        <button onClick={() => { history.push('/home') }}>Back</button>\r\n      </div>\r\n    </form>\r\n  )\r\n}"],"sourceRoot":""}