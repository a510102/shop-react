(this["webpackJsonpshop-react"]=this["webpackJsonpshop-react"]||[]).push([[10],{57:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(22),c=a(0),s=function(e){var t=Object(c.useState)(e),a=Object(n.a)(t,2),s=a[0],r=a[1];return{value:s,onChange:function(e){return r(e.target.value)}}}},66:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return g}));var n=a(6),c=a(17),s=a.n(c),r=a(23),l=a(22),o=a(0),u=a.n(o),i=a(24),m=a(11),p=a(3),d=a(57);function b(){var e=Object(i.b)(),t=Object(o.useState)(null),a=Object(l.a)(t,2),c=a[0],m=a[1],p=Object(o.useState)(!1),b=Object(l.a)(p,2),h=b[0],f=b[1],g=Object(o.useState)(!1),x=Object(l.a)(g,2),y=x[0],E=x[1],j=Object(d.a)(""),v=Object.assign({},j),O=Object(d.a)(""),N=Object.assign({},O),w=Object(d.a)(""),k=Object.assign({},w),S=Object(d.a)(""),C=Object.assign({},S),T=Object(d.a)(""),P=Object.assign({},T);function _(){return(_=Object(r.a)(s.a.mark((function t(){var a,c,r,l,o,u;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"https://vue-course-api.hexschool.io/api/jay/order",a={user:{name:v.value,address:N.value,tel:k.value,email:P.value},message:C.value||"\u7121"},t.next=4,fetch("https://vue-course-api.hexschool.io/api/jay/order",{method:"POST",body:JSON.stringify({data:Object(n.a)({},a)}),headers:{"content-type":"application/json"}});case 4:return c=t.sent,t.next=7,c.json();case 7:r=t.sent,l=r.success,o=r.orderId,u=r.message,l?(m(o),e.success(u),f(!0)):e.error(u);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function F(){return(F=Object(r.a)(s.a.mark((function t(){var a,n,r,l,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="https://vue-course-api.hexschool.io/api/jay/pay/".concat(c),t.next=3,fetch(a,{method:"POST"});case 3:return n=t.sent,t.next=6,n.json();case 6:r=t.sent,l=r.success,o=r.message,l&&(e.show(o),E(!0));case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var J="w-full  px-3 mt-3 mb-6 md:mb-0",q="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",D='appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500" id="grid-last-name';return u.a.createElement("div",{className:"mt-2 p-2"},y?u.a.createElement("div",{className:"w-full flex justify-center items-center h-screen text-lg"},"\u8cfc\u7269\u5b8c\u6210!"):u.a.createElement(u.a.Fragment,null,u.a.createElement("h2",{className:"text-teal-500 text-xl py-1 text-center border border-teal-500 rounded-lg"},"\u5ba2\u6236\u8cc7\u8a0a"),u.a.createElement("div",{className:"flex flex-wrap  mb-6 text-left "},u.a.createElement("section",{className:J},u.a.createElement("label",{className:q,htmlFor:"name"},"\u59d3\u540d:"),u.a.createElement("input",Object.assign({className:D,type:"string",name:"name",id:"name"},v))),u.a.createElement("section",{className:J},u.a.createElement("label",{className:q,htmlFor:"address"},"\u5730\u5740: "),u.a.createElement("input",Object.assign({className:D,type:"string",name:"address",id:"address"},N))),u.a.createElement("section",{className:J},u.a.createElement("label",{className:q,htmlFor:"tel"},"\u96fb\u8a71:"),u.a.createElement("input",Object.assign({className:D,type:"number",name:"tel",id:"tel"},k))),u.a.createElement("section",{className:J},u.a.createElement("label",{className:q,htmlFor:"email"},"E-mail:"),u.a.createElement("input",Object.assign({className:D,type:"email",name:"email",id:"email"},P))),u.a.createElement("section",{className:J},u.a.createElement("label",{className:q,htmlFor:"message"},"Message: "),u.a.createElement("input",Object.assign({className:D,type:"message",name:"message",id:"message"},C))),u.a.createElement("section",{className:"w-full  px-3 mt-3 mb-6 md:mb-0 sm:relative flex justify-end items-end"},h?u.a.createElement("button",{onClick:function(){return F.apply(this,arguments)},className:"bg-teal-500 hover:bg-teal-700 text-white font-bold py-1 px-2 rounded "},"\u78ba\u8a8d\u7d50\u5e33"):u.a.createElement("button",{onClick:function(){return _.apply(this,arguments)},className:"bg-teal-500 hover:bg-teal-700 text-white font-bold py-1 px-2 rounded "},"\u5b8c\u6210\u8a02\u55ae")))))}var h=a(25),f=function(e){var t=e.children,a=e.styleName,n=e.handleBack;return u.a.createElement("div",{className:a},t,u.a.createElement("div",{className:"col-span-2"},u.a.createElement("button",{className:"bg-blue-400 hover:bg-blue-600 text-white font-bold py-1 px-2 rounded-lg",onClick:n},"\u8fd4\u56de")))};function g(){var e=Object(i.b)(),t=Object(p.g)(),a=Object(m.b)(),c=Object(m.c)((function(e){return e.cartsState.carts})),d=Object(o.useState)(""),g=Object(l.a)(d,2),x=g[0],y=g[1],E=Object(o.useState)(!1),j=Object(l.a)(E,2),v=j[0],O=j[1],N=Object(o.useState)(!0),w=Object(l.a)(N,2),k=w[0],S=w[1];function C(){return function(e){fetch("https://vue-course-api.hexschool.io/api/jay/cart").then((function(e){return e.json()})).then((function(t){e({type:"UPDATE_CART",cart:t.data}),S(!1)}))}}function T(){return(T=Object(r.a)(s.a.mark((function t(n){var c,r,l,o,u;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"https://vue-course-api.hexschool.io/api/jay/coupon",c={data:{code:n}},t.next=4,fetch("https://vue-course-api.hexschool.io/api/jay/coupon",{method:"POST",body:JSON.stringify(c),headers:{"content-type":"application/json"}});case 4:return r=t.sent,t.next=7,r.json();case 7:l=t.sent,o=l.success,u=l.message,o?(a({type:"UPDATE_PRICE",price:l.data.final_total}),e.success(u)):e.error(u);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function P(e,t,a){return _.apply(this,arguments)}function _(){return(_=Object(r.a)(s.a.mark((function t(c,r,l){var o,u,i,m;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u={product_id:r,qty:l},S(!0),o="https://vue-course-api.hexschool.io/api/jay/cart/".concat(c),t.next=5,fetch(o,{method:"DELETE"});case 5:return i=t.sent,t.next=8,i.json();case 8:if(!((m=t.sent).success&&l>0)){t.next=20;break}return o="https://vue-course-api.hexschool.io/api/jay/cart",t.next=13,fetch(o,{method:"POST",body:JSON.stringify({data:Object(n.a)({},u)}),headers:{"content-type":"application/json"}});case 13:return i=t.sent,t.next=16,i.json();case 16:(m=t.sent).success?(a(C()),S(!1),e.show("\u66f4\u65b0\u6210\u529f")):(S(!1),e.error(m.message)),t.next=23;break;case 20:a(C()),S(!1),e.success(m.message);case 23:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function F(){return(F=Object(r.a)(s.a.mark((function t(n){var c,r,l,o,u;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c="https://vue-course-api.hexschool.io/api/jay/cart/".concat(n),S(!0),t.next=4,fetch(c,{method:"DELETE"});case 4:return r=t.sent,t.next=7,r.json();case 7:l=t.sent,o=l.success,u=l.message,o?(a(C()),S(!1),e.success(u)):(a(C()),S(!1),e.error(u));case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function J(){t.push("/shop-react/shop")}return Object(o.useEffect)((function(){a(C())}),[]),u.a.createElement("div",{className:"my-4 w-full mx-auto p-2 min-h-screen"},u.a.createElement("h2",{className:"text-xl p-2 w-full border border-teal-500 text-teal-500 rounded-lg"},"\u60a8\u7684\u8cfc\u7269\u8eca"),k?u.a.createElement(h.a,null):u.a.createElement("div",{className:"w-full text-right"},c.carts.length?u.a.createElement(f,{styleName:"w-full  grid grid-cols-1 md:grid-cols-2 gap-2 lg:gap-4",handleBack:J},u.a.createElement("ul",{className:"w-full"},u.a.createElement("li",{className:"p-2 flex border-b-2 items-center justify-around border-gray-600"},u.a.createElement("p",null,"\u540d\u5b57"),u.a.createElement("p",null,"\u6578\u91cf"),u.a.createElement("p",null,"\u50f9\u683c"),u.a.createElement("p",null,"\u522a\u9664")),c.carts.map((function(e,t){return u.a.createElement("li",{className:"ml-auto p-2 flex border-b-2 items-center justify-around border-gray-600",key:t},u.a.createElement("p",null,e.product.title),u.a.createElement("p",null,u.a.createElement("span",{className:"bg-blue-400 hover:bg-blue-600 text-white font-bold py-1 px-2 rounded-lg mr-1",onClick:function(){return P(e.id,e.product_id,e.qty-1)}},"-"),u.a.createElement("span",null,e.qty),u.a.createElement("span",{className:"bg-blue-400 hover:bg-blue-600 text-white font-bold py-1 px-2  rounded-lg mx-1",onClick:function(){return P(e.id,e.product_id,e.qty+1)}},"+"),u.a.createElement("span",null,e.product.unit)),u.a.createElement("p",{className:"ml-4"},e.total," \u5143"),u.a.createElement("button",{className:"bg-red-500 hover:bg-red-600 text-white font-bold py-1 px-2 rounded-lg",onClick:function(){return function(e){return F.apply(this,arguments)}(e.id)}},"\u522a\u9664"))}))),u.a.createElement("div",{className:"w-full"},u.a.createElement("p",{className:"p-2"},"\u5171 ",c.carts.length," \u4ef6\uff0c\u7e3d\u5171: ",c.final_total," \u5143"),u.a.createElement("div",{className:"w-full"},u.a.createElement("input",{className:"p-2 text-indigo-400 border border-teal-400 rounded-md",onChange:function(e){var t=e.target.value;y(t)},placeholder:"\u8f38\u5165\u512a\u60e0\u5377\u4ee3\u78bc",value:x||""}),u.a.createElement("button",{className:"ml-2 bg-indigo-400 hover:bg-indigo-600 text-white font-bold py-1 px-2 rounded-lg",onClick:function(){return function(e){return T.apply(this,arguments)}(x)}},"\u512a\u60e0")),v?u.a.createElement(b,null):u.a.createElement("button",{className:"mt-2 bg-teal-400 hover:bg-teal-600 text-white font-bold py-1 px-2 rounded-lg",onClick:function(){O(!0)}},"\u524d\u5f80\u7d50\u5e33"))):u.a.createElement(f,{handleBack:J,styleName:"w-full"},u.a.createElement("h3",{className:"text-4xl my-4 text-center"},"nothings"))))}}}]);
//# sourceMappingURL=10.da8e9159.chunk.js.map