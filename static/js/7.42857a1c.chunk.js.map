{"version":3,"sources":["hooks/useInputValue.js","components/Login.js"],"names":["useInputValue","initialState","useState","state","setState","value","onChange","e","target","Login","history","useHistory","alert","useAlert","dispatch","useDispatch","username","password","loading","setLoading","event","a","preventDefault","user","fetch","method","body","JSON","stringify","credentials","headers","response","json","result","success","message","type","push","replace","error","show","className","onSubmit","placeholder","name","onClick"],"mappings":"oKAEaA,EAAgB,SAACC,GAAkB,IAAD,EACnBC,mBAASD,GADU,mBACtCE,EADsC,KAC/BC,EAD+B,KAI7C,MAAO,CACLC,MAAOF,EACPG,SAJe,SAAAC,GAAC,OAAIH,EAASG,EAAEC,OAAOH,W,2KCI3B,SAASI,IACtB,IAAMC,EAAUC,cACVC,EAAQC,cACRC,EAAWC,cAHa,EAINf,YAAc,IAA3BgB,EAJmB,sBAKNhB,YAAc,IAA3BiB,EALmB,sBAOAf,oBAAS,GAPT,mBAOvBgB,EAPuB,KAOdC,EAPc,iDAS9B,WAA2BC,GAA3B,uBAAAC,EAAA,yDACED,EAAME,iBAEAC,EAAO,CACXP,SAAUA,EAASX,MACnBY,SAAUA,EAASZ,QAGjBW,EAASX,QAASY,EAASZ,MARjC,wBASIc,GAAW,GACC,mDAVhB,SAW2BK,MADX,mDACsB,CAChCC,OAAQ,OACRC,KAAMC,KAAKC,UAAUL,GACrBM,YAAa,UACbC,QAAS,CAAE,eAAgB,sBAfjC,cAWUC,EAXV,iBAiByBA,EAASC,OAjBlC,QAiBUC,EAjBV,OAkBYC,EAAqBD,EAArBC,QAASC,EAAYF,EAAZE,QACbD,GACFf,GAAW,GACXL,EAAS,CAAEsB,KAAM,YACjB1B,EAAQ2B,KAAK,0BAEblB,GAAW,GACXT,EAAQ4B,QAAQ,qBAChB1B,EAAM2B,MAAMJ,IA1BlB,yBA4BcnB,EAASX,OAASY,EAASZ,MACrCO,EAAM4B,KAAK,6BACDvB,EAASZ,OAASW,EAASX,MACrCO,EAAM4B,KAAK,8BAEX5B,EAAM4B,KAAK,0CAjCf,6CAT8B,sBA+C9B,OAAItB,EACK,kBAAC,IAAD,MAKP,yBAAKuB,UAAU,4CACb,0BAAMC,SAtDoB,4CAsDGD,UAAU,kDACrC,wBAAIA,UAAU,+BAAd,UACA,6BAASA,UAAU,QACjB,2BAAOA,UAAU,8CAAjB,YACA,yCACEA,UAAU,6HACVL,KAAK,QACLO,YAAY,QACZC,KAAK,YACD5B,KAER,6BAASyB,UAAU,QACjB,2BAAOA,UAAU,8CAAjB,eACA,yCACEA,UAAU,kIACVL,KAAK,mBACLO,YAAY,WACZC,KAAK,YACD3B,KAER,6BAASwB,UAAU,qCACjB,4BAAQA,UAAU,+GAA+GL,KAAK,UAAtI,UACA,4BAAQK,UAAU,kFAAkFI,QAAS,WAAQnC,EAAQ2B,KAAK,sBAAlI","file":"static/js/7.42857a1c.chunk.js","sourcesContent":["import { useState } from 'react';\n\nexport const useInputValue = (initialState) => {\n  const [state, setState] = useState(initialState);\n  const onChange = e => setState(e.target.value);\n\n  return {\n    value: state,\n    onChange,\n  }\n}","import React, { useState } from 'react'\r\nimport { useHistory } from 'react-router-dom';\r\nimport { useAlert } from 'react-alert';\r\nimport { useDispatch } from 'react-redux';\r\nimport { useInputValue } from '../hooks/useInputValue';\r\n\r\nimport Loading from './Loading/Loading';\r\n\r\nexport default function Login() {\r\n  const history = useHistory();\r\n  const alert = useAlert();\r\n  const dispatch = useDispatch();\r\n  const { ...username } = useInputValue('');\r\n  const { ...password } = useInputValue('');\r\n\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  async function handleLogin(event) {\r\n    event.preventDefault();\r\n\r\n    const user = {\r\n      username: username.value,\r\n      password: password.value\r\n    }\r\n\r\n    if (username.value && password.value) {\r\n      setLoading(true);\r\n      const Url = 'https://vue-course-api.hexschool.io/admin/signin';\r\n      const response = await fetch(Url, {\r\n        method: \"POST\",\r\n        body: JSON.stringify(user),\r\n        credentials: 'include',\r\n        headers: { 'content-type': 'application/json' }\r\n      });\r\n      const result = await response.json();\r\n      const { success, message } = result;\r\n      if (success) {\r\n        setLoading(false);\r\n        dispatch({ type: 'LOGO_IN' });\r\n        history.push('/shop-react/products');\r\n      } else {\r\n        setLoading(false);\r\n        history.replace('/shop-react/login');\r\n        alert.error(message);\r\n      }\r\n    } else if (!username.value && password.value) {\r\n      alert.show('請輸入E-mail');\r\n    } else if (!password.value && username.value) {\r\n      alert.show('請輸入Password')\r\n    } else {\r\n      alert.show('請輸入Email 跟Password')\r\n    }\r\n\r\n  }\r\n\r\n  if (loading) {\r\n    return <Loading />\r\n  }\r\n\r\n\r\n  return (\r\n    <div className='w-full sm:max-w-xs mx-auto mt-4 h-screen'>\r\n      <form onSubmit={handleLogin} className='bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4'>\r\n        <h2 className=\"my-1 text-4xl text-teal-500\">LogoIn</h2>\r\n        <section className='my-8'>\r\n          <label className='block text-teal-500 text-sm font-bold mb-2'> Email :</label>\r\n          <input\r\n            className='shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline'\r\n            type=\"email\"\r\n            placeholder='email'\r\n            name='username'\r\n            {...username} />\r\n        </section>\r\n        <section className='mb-8'>\r\n          <label className='block text-teal-500 text-sm font-bold mb-2'> Password :</label>\r\n          <input\r\n            className='shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline'\r\n            type=\"current-password\"\r\n            placeholder='password'\r\n            name=\"password\"\r\n            {...password} />\r\n        </section>\r\n        <section className='flex items-center justify-between'>\r\n          <button className='bg-teal-500 hover:bg-teal-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline' type='submit'>Submit</button>\r\n          <button className='inline-block align-baseline font-bold text-sm text-teal-500 hover:text-teal-800' onClick={() => { history.push('/shop-react/home') }}>Back</button>\r\n        </section>\r\n      </form>\r\n    </div>\r\n\r\n  )\r\n}"],"sourceRoot":""}