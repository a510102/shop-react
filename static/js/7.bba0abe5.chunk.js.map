{"version":3,"sources":["components/Login.js"],"names":["Login","setAuth","history","useHistory","alert","useAlert","useState","username","password","user","setUser","loading","setLoading","handleChange","event","target","name","value","preUser","handleLogin","a","preventDefault","fetch","method","body","JSON","stringify","credentials","headers","response","json","success","push","show","onSubmit","type","placeholder","onChange","className","onClick"],"mappings":"qRAMe,SAASA,EAAT,GAA6B,IAAZC,EAAW,EAAXA,QACxBC,EAAUC,cACVC,EAAQC,cAF2B,EAIjBC,mBAAS,CAC/BC,SAAU,GACVC,SAAU,KAN6B,mBAIlCC,EAJkC,KAI5BC,EAJ4B,OASXJ,oBAAS,GATE,mBASlCK,EATkC,KASzBC,EATyB,KAYnCC,EAAe,SAAAC,GAAU,IAAD,EACJA,EAAMC,OAAtBC,EADoB,EACpBA,KAAMC,EADc,EACdA,MACdP,GAAQ,SAAAQ,GACN,OAAO,2BACFA,GADL,kBAEGF,EAAOC,QAKRE,EAAW,uCAAG,WAAOL,GAAP,mBAAAM,EAAA,yDAClBN,EAAMO,iBAEEd,EAAuBE,EAAvBF,SAAUC,EAAaC,EAAbD,UACdD,IAAYC,EAJE,wBAKhBI,GAAW,GACC,mDANI,SAOOU,MADX,mDACsB,CAChCC,OAAQ,OACRC,KAAMC,KAAKC,UAAUjB,GACrBkB,YAAa,UACbC,QAAS,CAAE,eAAgB,sBAXb,cAOVC,EAPU,iBAaKA,EAASC,OAbd,eAcLC,UACTnB,GAAW,GACXX,GAAQ,GACRC,EAAQ8B,KAAK,cAjBC,yBAmBNzB,GAAYC,EACtBJ,EAAM6B,KAAK,6BACDzB,GAAYD,EACtBH,EAAM6B,KAAK,8BAEX7B,EAAM6B,KAAK,0CAxBK,4CAAH,sDA6BjB,OAAItB,EACK,kBAAC,IAAD,MAKP,0BAAMuB,SAAUf,GACd,sCACA,0CACE,2BACEgB,KAAK,QACLC,YAAY,QACZpB,KAAK,WACLqB,SAAUxB,EACVI,MAAOR,EAAKF,YAEhB,6CACE,2BACE4B,KAAK,mBACLC,YAAY,WACZpB,KAAK,WACLqB,SAAUxB,EACVI,MAAOR,EAAKD,YAEhB,yBAAK8B,UAAU,YACb,4BAAQH,KAAK,UAAb,UACA,4BAAQI,QAAS,WAAQrC,EAAQ8B,KAAK,WAAtC","file":"static/js/7.bba0abe5.chunk.js","sourcesContent":["import React, { useState } from 'react'\r\nimport { useHistory } from 'react-router-dom';\r\nimport { useAlert } from 'react-alert';\r\nimport Loading from './Loading/Loading';\r\nimport './Logoin.scss'\r\n\r\nexport default function Login({ setAuth }) {\r\n  const history = useHistory();\r\n  const alert = useAlert();\r\n\r\n  const [user, setUser] = useState({\r\n    username: '',\r\n    password: ''\r\n  });\r\n\r\n  const [loading, setLoading] = useState(false);\r\n\r\n\r\n  const handleChange = event => {\r\n    const { name, value } = event.target;\r\n    setUser(preUser => {\r\n      return {\r\n        ...preUser,\r\n        [name]: value\r\n      }\r\n    });\r\n  }\r\n\r\n  const handleLogin = async (event) => {\r\n    event.preventDefault();\r\n\r\n    const { username, password } = user;\r\n    if (username && password) {\r\n      setLoading(true);\r\n      const Url = 'https://vue-course-api.hexschool.io/admin/signin';\r\n      const response = await fetch(Url, {\r\n        method: \"POST\",\r\n        body: JSON.stringify(user),\r\n        credentials: 'include',\r\n        headers: { 'content-type': 'application/json' }\r\n      });\r\n      const result = await response.json();\r\n      if (result.success) {\r\n        setLoading(false);\r\n        setAuth(true);\r\n        history.push('/products');\r\n      }\r\n    } else if (!username && password) {\r\n      alert.show('請輸入E-mail');\r\n    } else if (!password && username) {\r\n      alert.show('請輸入Password')\r\n    } else {\r\n      alert.show('請輸入Email 跟Password')\r\n    }\r\n\r\n  }\r\n\r\n  if (loading) {\r\n    return <Loading />\r\n  }\r\n\r\n\r\n  return (\r\n    <form onSubmit={handleLogin}>\r\n      <h2>LogoIn</h2>\r\n      <label> Email :\r\n        <input\r\n          type=\"email\"\r\n          placeholder='email'\r\n          name='username'\r\n          onChange={handleChange}\r\n          value={user.username} />\r\n      </label>\r\n      <label> Password :\r\n        <input\r\n          type=\"current-password\"\r\n          placeholder='password'\r\n          name=\"password\"\r\n          onChange={handleChange}\r\n          value={user.password} />\r\n      </label>\r\n      <div className='form-btn'>\r\n        <button type='submit'>Submit</button>\r\n        <button onClick={() => { history.push('/home') }}>Back</button>\r\n      </div>\r\n    </form>\r\n  )\r\n}"],"sourceRoot":""}