(this["webpackJsonpshop-react"]=this["webpackJsonpshop-react"]||[]).push([[4],{55:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(22),c=a(0),r=a.n(c);function l(e){var t=e.num,a=e.setDePage,l=e.dePage,o=Object(c.useState)([]),s=Object(n.a)(o,2),u=s[0],d=s[1];Object(c.useEffect)((function(){!function(e){var t=[];if(e>2){for(var a=1;a<e+1;a++)t.push(a);d(t)}}(t)}),[t]);return r.a.createElement("ul",{className:"max-w-sm inline-flex mt-2"},u.length>1&&1!==l&&r.a.createElement("li",null,r.a.createElement("button",{className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-l",onClick:function(){return a(l-1)}},"Pre")," "),u.length>1&&u.map((function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("button",{className:l===e?"bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-l":"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-l",onClick:function(){return a(e)}},e))})),u.length>1&&l!==t&&r.a.createElement("li",null," ",r.a.createElement("button",{className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-r",onClick:function(){return a(l+1)}},"Next")))}},56:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=new Date;a.setTime(1e3*e);var n=a.getFullYear(),r=c(a.getMonth()+1),l=c(a.getDate()),o=c(a.getHours()),s=c(a.getMinutes());return t?"".concat(n,"-").concat(r,"-").concat(l,"- ").concat(o,": ").concat(s):"".concat(n,"-").concat(r,"-").concat(l)};function c(e){return e<10&&(e="0".concat(e)),e}},67:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return g}));var n=a(17),c=a.n(n),r=a(26),l=a(6),o=a(23),s=a(22),u=a(0),d=a.n(u),m=a(24),i=a(56);function p(e){var t=e.open,a=e.setOpen,n=e.coupon,c=e.handleChange,r=e.updateCoupon,l=e.addCoupon,o=e.handleCancel,s="w-full md:w-1/2 lg:w-1/3  px-3 mt-3 mb-6 md:mb-0",u="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",m='appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500" id="grid-last-name';return d.a.createElement(d.a.Fragment,null,d.a.createElement("button",{className:"my-2 bg-teal-500 hover:bg-teal-700 text-white font-bold py-1 px-2 rounded",onClick:function(){return a(!t)}},"Add Coupon"),t&&d.a.createElement("div",{className:"flex flex-wrap mb-6"},d.a.createElement("section",{className:s},d.a.createElement("label",{className:u,htmlFor:"title"},"\u512a\u60e0\u5377\u540d\u7a31:"),d.a.createElement("input",{className:m,id:"title",value:n.title||"",name:"title",onChange:c})),d.a.createElement("section",{className:s},d.a.createElement("label",{className:u,htmlFor:"code"},"\u4ee3\u78bc:"),d.a.createElement("input",{className:m,id:"code",value:n.code||"",name:"code",onChange:c})),d.a.createElement("section",{className:s},d.a.createElement("label",{className:u,htmlFor:"percent"},"\u6298\u6263"),d.a.createElement("input",{className:m,id:"percent",value:n.percent||"",name:"percent",onChange:c})),d.a.createElement("section",{className:s},d.a.createElement("label",{className:u,htmlFor:"due_date"},"\u4f7f\u7528\u671f\u9650:"),d.a.createElement("input",{className:m,id:"due_date",type:"date",value:Object(i.a)(n.due_date)||"",name:"due_date",onChange:c})),d.a.createElement("section",{className:s},d.a.createElement("label",{className:u,htmlFor:"is_enable"},"\u662f\u5426\u555f\u7528:"),d.a.createElement("input",{id:"is_enable",type:"checkbox",checked:1===n.is_enabled||"",name:"is_enabled",onChange:c})),d.a.createElement("div",{className:"w-full md:w-1/2 lg:w-1/3  px-3 mt-3 mb-6 md:mb-0 sm:relative flex justify-end items-end"},n.hasOwnProperty("id")?d.a.createElement("button",{className:"bg-teal-500 hover:bg-teal-700 text-white font-bold py-1 px-2 rounded",onClick:r},"Update"):d.a.createElement("button",{className:"bg-teal-500 hover:bg-teal-700 text-white font-bold py-1 px-2 rounded",onClick:l},"add"),d.a.createElement("button",{className:"bg-red-500 hover:bg-red-700 text-white font-bold py-1 px-2 rounded ml-2",onClick:o},"Cancel"))))}function b(e){var t=e.coupon,a=e.updateIsenable,n=e.openUpdateCoupon,c=e.updateDate;return d.a.createElement("tr",{className:"text-right"},d.a.createElement("td",{className:"border px-4 py-2"},t.title),d.a.createElement("td",{className:"border px-4 py-2"},t.code),d.a.createElement("td",{className:"border px-4 py-2"},t.percent/100," \u6298"),d.a.createElement("td",{className:"border px-4 py-2"},Object(i.a)(t.due_date)),d.a.createElement("td",{className:"border px-4 py-2"},d.a.createElement("input",{type:"checkbox",onChange:function(e){return a(e,t)},checked:1===t.is_enabled})),d.a.createElement("td",{className:"border px-4 py-2"},d.a.createElement("button",{className:"bg-teal-500 hover:bg-teal-700 text-white font-bold py-1 px-2 rounded",onClick:function(){return n(t)}},"\u7de8\u8f2f")),d.a.createElement("td",{className:"border px-4 py-2"}," ",d.a.createElement("button",{className:"bg-red-500 hover:bg-red-700 text-white font-bold py-1 px-2 rounded",onClick:function(){c(null,t.id,"DELETE")}},"\u522a\u9664")))}var h=a(25),f=a(55);function g(){var e=Object(m.b)(),t=Object(u.useState)(null),a=Object(s.a)(t,2),n=a[0],i=a[1],g=Object(u.useState)({}),E=Object(s.a)(g,2),x=E[0],y=E[1],N=Object(u.useState)(!0),v=Object(s.a)(N,2),j=v[0],O=v[1],C=Object(u.useState)(!1),w=Object(s.a)(C,2),k=w[0],_=w[1],P=Object(u.useState)(1),S=Object(s.a)(P,2),T=S[0],D=S[1],F=Object(u.useState)(null),U=Object(s.a)(F,2),J=U[0],A=U[1];function I(e){return M.apply(this,arguments)}function M(){return(M=Object(o.a)(c.a.mark((function e(t){var a,n,r,l,o,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="https://vue-course-api.hexschool.io/api/jay/admin/coupons?page=".concat(t),e.next=3,fetch(a,{credentials:"include"});case 3:return n=e.sent,e.next=6,n.json();case 6:r=e.sent,l=r.success,o=r.pagination,s=r.coupons,l&&(i(s),A(o.total_pages),O(!1));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(e,t,a){return L.apply(this,arguments)}function L(){return(L=Object(o.a)(c.a.mark((function t(a,n,r){var o,s,u,d,m;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=n?"https://vue-course-api.hexschool.io/api/jay/admin/coupon/".concat(n):"https://vue-course-api.hexschool.io/api/jay/admin/coupon",t.next=3,fetch(o,{method:r,body:("PUT"===r||"POST"===r)&&JSON.stringify({data:Object(l.a)({},a)}),credentials:"include",headers:{"content-type":("PUT"===r||"POST"===r)&&"application/json"}});case 3:return s=t.sent,t.next=6,s.json();case 6:u=t.sent,d=u.success,m=u.message,d?(I(),m&&e.success(m)):m&&e.error(m);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Y(e,t){H(Object(l.a)(Object(l.a)({},t),{},{is_enabled:e.target.checked?1:0}),t.id,"PUT")}function q(e){y(e),_(!0)}Object(u.useEffect)((function(){I(T)}),[T]);return j?d.a.createElement(h.a,null):d.a.createElement("div",{className:"container"},d.a.createElement("h2",{className:"text-2xl"},"Coupon"),d.a.createElement(p,{open:k,setOpen:_,coupon:x,handleChange:function(e){var t=e.target,a=t.name,n=t.value,c=t.checked,o=t.valueAsNumber;"due_date"===a?n=o/1e3:"is_enabled"===a&&(n=c?1:0),y((function(e){return Object(l.a)(Object(l.a)({},e),{},Object(r.a)({},a,n))}))},updateCoupon:function(){H(x,x.id,"PUT"),_(!1)},addCoupon:function(){H(x,null,"POST"),y({}),_(!1)},handleCancel:function(){y({}),_(!1)}}),d.a.createElement("table",{className:"table-auto w-full"},d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("th",{className:"border px-4 py-2"},"\u512a\u60e0\u5377"),d.a.createElement("th",{className:"border px-4 py-2"},"\u4ee3\u78bc"),d.a.createElement("th",{className:"border px-4 py-2"},"\u6298\u6263"),d.a.createElement("th",{className:"border px-4 py-2"},"\u4f7f\u7528\u671f\u9650"),d.a.createElement("th",{className:"border px-4 py-2"},"\u4f7f\u7528"),d.a.createElement("th",{className:"border px-4 py-2"},"\u7de8\u8f2f"),d.a.createElement("th",{className:"border px-4 py-2"},"\u522a\u9664"))),d.a.createElement("tbody",null,n&&n.map((function(e,t){return d.a.createElement(b,{key:t,coupon:e,updateIsenable:Y,openUpdateCoupon:q,updateDate:H})})))),d.a.createElement(f.a,{dePage:T,setDePage:D,num:J}))}}}]);
//# sourceMappingURL=4.6971dc37.chunk.js.map